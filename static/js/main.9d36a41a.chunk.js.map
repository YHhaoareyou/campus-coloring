{"version":3,"sources":["ImageSwitch.js","LikeButton.js","Footer.js","Canvas.js","App.js","Nft.js","img/hiro-marker.png","Scene.js","index.js"],"names":["ImageSwitchWrapper","styled","Grid","ImageSwitch","switchToPrev","switchToNext","Column","width","Button","icon","onClick","circular","LikeButton","state","likes","props","image","isClicked","like","location","db","ref","child","id","toString","set","setState","prevState","prevProps","this","color","style","marginTop","padding","disabled","Icon","name","Label","top","floating","React","Component","FooterWrapper","Footer","openCanvas","Segment","description","Canvas","storage","bkImg","resetCanvas","closeCanvas","console","log","height","onSave","blob","imageName","username","isPublic","prompt","window","confirm","Image","src","uploadTimestamp","Date","now","put","then","snapshot","getDownloadURL","imageUrl","snap","timestamp","user","is_public","alert","catch","error","render","canvas","triggerSave","setColor","setLineWidth","zIndex","margin","backgroundColor","border","background","type","onChange","e","target","value","placeholder","min","max","paddingTop","Layout","InnerLayout","App","isCanvasOpen","isEditMode","currentImg","imagesInfo","length","signIn","auth","signInWithRedirect","firebase","GoogleAuthProvider","signOut","switchToPrevImage","setDisplayImageIndex","prevIndex","indexOf","switchToNextImage","nextIndex","currentLocation","imgUrls","openCanvasWithImg","Nft","entityRef","createRef","markerhandler","url","smooth","smoothCount","smoothTolerance","smoothThreshold","data-location","images","map","img","i","displayImageIndex","position","rotation","Scene","locationNames","currentImages","imageUrlsById","dbData","image_urls","locationData","locations","Object","keys","setImages","setImagesInfo","setLocation","loc","AFRAME","registerComponent","init","el","sceneEl","addEventListener","dataset","once","val","push","components","isImagesLoaded","isLocationsLoaded","vr-mode-ui","renderer","embedded","arjs","hiroMarker","alt","crossOrigin","camera","firebaseApp","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","database","Root","index","onAuthStateChanged","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.9d36a41a.chunk.js","sourcesContent":["import { Button, Grid } from \"semantic-ui-react\";\nimport styled from \"styled-components\";\n\nconst ImageSwitchWrapper = styled(Grid)`\n  position: absolute;\n  left: 0;\n  top: 45%;\n  width: 95%;\n  height: 5%;\n`;\n\nconst ImageSwitch = ({ switchToPrev, switchToNext }) => (\n  <ImageSwitchWrapper>\n    <Grid.Column width={1}>\n      <Button icon=\"angle left\" onClick={switchToPrev} circular />\n    </Grid.Column>\n    <Grid.Column width={13}></Grid.Column>\n    <Grid.Column width={1}>\n      <Button icon=\"angle right\" onClick={switchToNext} circular />\n    </Grid.Column>\n  </ImageSwitchWrapper>\n);\n\nexport default ImageSwitch;\n","import React from \"react\";\nimport { Button, Icon, Label } from \"semantic-ui-react\";\n\nclass LikeButton extends React.Component {\n  state = {\n    likes: this.props.image.likes || 0,\n    isClicked: false,\n  };\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.image &&\n      this.props.image &&\n      prevProps.image !== this.props.image\n    ) {\n      this.setState({ likes: this.props.image.likes || 0, isClicked: false });\n    }\n  }\n\n  like = () => {\n    const { location, image, db } = this.props;\n    db.ref(\"locations/\" + location)\n      .child(image.id.toString())\n      .child(\"likes\")\n      .set(image.likes ? image.likes + 1 : 1);\n    this.setState((prevState) => ({\n      ...prevState,\n      likes: prevState.likes + 1,\n      isClicked: true,\n    }));\n  };\n\n  render() {\n    const { likes, isClicked } = this.state;\n    return (\n      <Button\n        color=\"red\"\n        style={{ marginTop: \"1.5rem\", padding: \"0.8rem 0.3rem 0.6rem 1rem\" }}\n        onClick={this.like}\n        disabled={isClicked}\n      >\n        <Icon name=\"heart\" />\n        <Label style={{ top: \"1rem\" }} floating>\n          {likes}\n        </Label>\n      </Button>\n    );\n  }\n}\n\nexport default LikeButton;\n","import { Button, Grid, Segment } from \"semantic-ui-react\";\nimport styled from \"styled-components\";\nimport LikeButton from \"./LikeButton\";\n\nconst FooterWrapper = styled(Grid)`\n  position: absolute;\n  left: 0;\n  bottom: 0%;\n  width: 100%;\n  height: 15%;\n`;\n\nconst Footer = ({ location, image, openCanvas, db }) => (\n  <FooterWrapper>\n    <Grid.Column width={8} style={{ padding: \"1rem\" }}>\n      <Segment>\n        <h4>{image.name}</h4>\n        <p>{image.description}</p>\n      </Segment>\n    </Grid.Column>\n    <Grid.Column width={2} style={{ padding: \"1rem 0px\" }}>\n      <LikeButton location={location} image={image} db={db} />\n    </Grid.Column>\n    <Grid.Column width={6} style={{ padding: \"1rem\" }}>\n      <Button\n        color=\"green\"\n        onClick={openCanvas}\n        style={{ padding: \"1rem 0.2rem\", width: \"100%\" }}\n      >\n        Create new\n      </Button>\n      <Button\n        color=\"orange\"\n        onClick={openCanvas}\n        style={{ padding: \"1rem 0.2rem\", width: \"100%\" }}\n      >\n        Paint on this\n      </Button>\n    </Grid.Column>\n  </FooterWrapper>\n);\n\nexport default Footer;\n","import { Button } from \"semantic-ui-react\";\nimport { ReactPainter } from \"react-painter\";\n\nconst Canvas = ({ db, storage, location, bkImg, resetCanvas, closeCanvas }) => {\n  console.log(bkImg);\n  console.log(bkImg);\n  console.log(bkImg);\n  const saveCanvas = (blob) => {\n    var imageName, description, username, isPublic;\n    do {\n      username = prompt(\"What's your name? Any nickname is fine!\");\n    } while (!username);\n    do {\n      imageName = prompt(\"Please name your painting:\");\n    } while (!imageName);\n    description = prompt(\"Please write something about this painting:\");\n    isPublic = window.confirm(\n      \"Do you allow other users create paintings basing on this one?\"\n    );\n    var image = new Image();\n    image.src = blob;\n    const uploadTimestamp = Date.now();\n    storage\n      .ref()\n      .child(\"images/\" + imageName)\n      .put(blob)\n      .then((snapshot) => {\n        return snapshot.ref.getDownloadURL();\n      })\n      .then((imageUrl) => {\n        db.ref(\"image_urls\")\n          .child(uploadTimestamp)\n          .set(imageUrl)\n          .then((snap) => {\n            db.ref(\"locations\")\n              .child(location + \"/\" + uploadTimestamp)\n              .set({\n                name: imageName,\n                description: description,\n                timestamp: uploadTimestamp,\n                user: username,\n                is_public: isPublic,\n              })\n              .then(function (snap) {\n                alert(\"Uploaded! Refresh the page to see your materpiece!\");\n                closeCanvas();\n              })\n              .catch((error) => {\n                alert(error);\n              });\n          });\n      });\n  };\n\n  return (\n    <ReactPainter\n      width={300}\n      height={500}\n      onSave={saveCanvas}\n      image={bkImg}\n      render={({ canvas, triggerSave, setColor, setLineWidth }) => {\n        return (\n          <div style={{ zIndex: \"1000\" }}>\n            <h2 style={{ margin: \"0px\" }}>{location || \"none\"}</h2>\n            <div\n              style={{\n                backgroundColor: \"rgba(0, 0, 0, 0)\",\n                border: \"5px solid #666\",\n              }}\n            >\n              {canvas}\n            </div>\n            <div style={{ padding: \"1rem\", background: \"#ccc\" }}>\n              <div>\n                Color{\" \"}\n                <input\n                  type=\"color\"\n                  onChange={(e) => setColor(e.target.value)}\n                  style={{ width: \"30%\" }}\n                />{\" \"}\n                Width{\" \"}\n                <input\n                  type=\"number\"\n                  placeholder=\"5\"\n                  min=\"1\"\n                  max=\"20\"\n                  onChange={(e) => setLineWidth(e.target.value)}\n                  style={{ width: \"30%\" }}\n                />\n              </div>\n              <div style={{ paddingTop: \"1rem\" }}>\n                <Button color=\"red\" icon=\"close\" onClick={closeCanvas} />\n                <Button color=\"orange\" onClick={resetCanvas}>\n                  Reset\n                </Button>\n                <Button color=\"green\" onClick={triggerSave}>\n                  Save!!\n                </Button>\n              </div>\n            </div>\n          </div>\n        );\n      }}\n    />\n  );\n};\n\nexport default Canvas;\n","import React from \"react\";\nimport \"./App.css\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport styled from \"styled-components\";\nimport firebase from \"firebase/app\";\nimport ImageSwitch from \"./ImageSwitch\";\nimport Footer from \"./Footer\";\nimport Canvas from \"./Canvas\";\n\nconst Layout = styled(\"div\")`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 90%;\n`;\n\nconst InnerLayout = styled(\"div\")`\n  position: relative;\n  width: 100%;\n  height: 100%;\n`;\n\nclass App extends React.Component {\n  state = {\n    isCanvasOpen: false,\n    isEditMode: false,\n    currentImg:\n      this.props.imagesInfo &&\n      this.props.imagesInfo.length &&\n      this.props.imagesInfo[0],\n  };\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.props.imagesInfo &&\n      prevProps.imagesInfo !== this.props.imagesInfo\n    ) {\n      if (this.props.imagesInfo.length > 0) {\n        this.setState({ currentImg: this.props.imagesInfo[0] });\n      } else {\n        this.setState({ currentImg: null });\n      }\n    }\n  }\n\n  signIn = () => {\n    try {\n      this.props.auth.signInWithRedirect(\n        new firebase.auth.GoogleAuthProvider()\n      );\n    } catch (e) {\n      alert(e);\n    }\n  };\n\n  signOut = () => {\n    try {\n      this.props.auth.signOut();\n    } catch (e) {\n      alert(e);\n    }\n  };\n\n  switchToPrevImage = () => {\n    const { imagesInfo, setDisplayImageIndex } = this.props;\n    const { currentImg } = this.state;\n    const prevIndex =\n      imagesInfo.indexOf(currentImg) === 0\n        ? imagesInfo.length - 1\n        : imagesInfo.indexOf(currentImg) - 1;\n    this.setState({\n      currentImg: imagesInfo[prevIndex],\n    });\n    setDisplayImageIndex(prevIndex);\n  };\n\n  switchToNextImage = () => {\n    const { imagesInfo, setDisplayImageIndex } = this.props;\n    const { currentImg } = this.state;\n    const nextIndex =\n      imagesInfo.indexOf(currentImg) + 1 === imagesInfo.length\n        ? 0\n        : imagesInfo.indexOf(currentImg) + 1;\n    this.setState({\n      currentImg: imagesInfo[nextIndex],\n    });\n    setDisplayImageIndex(nextIndex);\n  };\n\n  resetCanvas = () => {\n    this.setState({ isCanvasOpen: false }, () =>\n      this.setState({ isCanvasOpen: true })\n    );\n  };\n\n  render() {\n    const { currentLocation, db, storage, imgUrls } = this.props;\n    const { isCanvasOpen, currentImg, isEditMode } = this.state;\n    return (\n      <Layout>\n        <InnerLayout>\n          {isCanvasOpen && (\n            <Canvas\n              location={currentLocation}\n              bkImg={\n                \"https://firebasestorage.googleapis.com/v0/b/campus-coloring.appspot.com/o/images%2FFSE?alt=media&token=b71ce295-ff89-4623-9fe2-25feb18faca6\"\n              }\n              isEditMode={isEditMode}\n              db={db}\n              storage={storage}\n              resetCanvas={this.resetCanvas}\n              closeCanvas={() =>\n                this.setState({ isCanvasOpen: false, isEditMode: false })\n              }\n            />\n          )}\n\n          {currentImg && !isCanvasOpen && (\n            <ImageSwitch\n              switchToPrev={this.switchToPrevImage}\n              switchToNext={this.switchToNextImage}\n            />\n          )}\n\n          {currentImg && !isCanvasOpen && (\n            <Footer\n              location={currentLocation}\n              image={currentImg}\n              openCanvas={() =>\n                this.setState({ isCanvasOpen: true, isEditMode: false })\n              }\n              openCanvasWithImg={() =>\n                this.setState({ isCanvasOpen: true, isEditMode: true })\n              }\n              db={db}\n            />\n          )}\n        </InnerLayout>\n      </Layout>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\n\nclass Nft extends React.Component {\n  constructor(props) {\n    super(props);\n    this.entityRef = React.createRef();\n  }\n\n  render() {\n    return (\n      <a-nft\n        markerhandler\n        type=\"nft\"\n        url={\n          \"https://yhhaoareyou.github.io/campus-coloring/descriptors/\" +\n          this.props.location\n        }\n        smooth=\"true\"\n        smoothCount=\"10\"\n        smoothTolerance=\".01\"\n        smoothThreshold=\"5\"\n        id=\"a-nft\"\n        data-location={this.props.location}\n      >\n        {this.props.images.map((img, i) => (\n          <a-image\n            src={\"#\" + img.id}\n            width={i === this.props.displayImageIndex ? 375 * 0.5 : 0}\n            height={i === this.props.displayImageIndex ? 500 * 0.5 : 0}\n            position=\"35 0 0\"\n            rotation=\"-90 0 0\"\n            key={img.id}\n          ></a-image>\n        ))}\n      </a-nft>\n    );\n  }\n}\n\nexport default Nft;\n","export default __webpack_public_path__ + \"static/media/hiro-marker.81a8bff1.png\";","import React from \"react\";\nimport Nft from \"./Nft\";\nimport hiroMarker from \"./img/hiro-marker.png\";\nimport \"firebase/database\";\nimport \"firebase/storage\";\n\nclass Scene extends React.Component {\n  state = {\n    locationNames: [],\n    currentLocation: \"\",\n    currentImages: [],\n    imageUrlsById: {},\n  };\n\n  async componentDidMount() {\n    const { db, dbData } = this.props;\n    const imageUrlsById = dbData.image_urls;\n    const locationData = dbData.locations;\n    this.setState({\n      imageUrlsById: imageUrlsById,\n      locationNames: Object.keys(locationData),\n    });\n\n    const setImages = (images) => {\n      this.setState({ currentImages: images });\n      this.props.setImagesInfo(images);\n    };\n    const setLocation = (loc) => {\n      this.setState({ currentLocation: loc });\n      this.props.setLocation(loc);\n    };\n\n    window.AFRAME.registerComponent(\"markerhandler\", {\n      init: function () {\n        this.el.sceneEl.addEventListener(\"markerFound\", (e) => {\n          const currentLocation = e.target.dataset.location;\n          setLocation(currentLocation);\n          db.ref(\"locations\")\n            .child(currentLocation)\n            .once(\"value\", (snap) => {\n              var currentImages = [];\n              const images = snap.val();\n              for (var id in images) {\n                currentImages.push({ ...images[id], id: id });\n              }\n              setImages(currentImages);\n            });\n        });\n\n        this.el.sceneEl.addEventListener(\"markerLost\", (e) => setImages([]));\n      },\n    });\n  }\n\n  componentWillUnmount() {\n    delete window.AFRAME.components.markerhandler;\n  }\n\n  render() {\n    const {\n      locationNames,\n      currentLocation,\n      currentImages,\n      imageUrlsById,\n    } = this.state;\n    const isImagesLoaded = Object.keys(imageUrlsById).length > 0;\n    const isLocationsLoaded = locationNames.length > 0;\n    return (\n      <a-scene\n        id=\"a-scene\"\n        vr-mode-ui=\"enabled: false;\"\n        renderer=\"logarithmicDepthBuffer: true;\"\n        embedded\n        arjs=\"trackingMethod: best; sourceType: webcam;debugUIEnabled: false;\"\n      >\n        {isImagesLoaded && (\n          <a-assets>\n            <img id=\"hiroMarker\" src={hiroMarker} alt=\"hiroMarker\" />\n            {Object.keys(imageUrlsById).map((id) => (\n              <img\n                key={id}\n                id={id}\n                src={imageUrlsById[id]}\n                alt={id}\n                crossOrigin=\"anonymous\"\n              />\n            ))}\n          </a-assets>\n        )}\n        {isImagesLoaded &&\n          isLocationsLoaded &&\n          locationNames.map((name) => (\n            <Nft\n              key={name}\n              location={name}\n              images={\n                currentLocation === name && currentImages.length > 0\n                  ? currentImages\n                  : []\n              }\n              displayImageIndex={this.props.displayImageIndex}\n            />\n          ))}\n        <a-entity camera></a-entity>\n      </a-scene>\n    );\n  }\n}\n\nexport default Scene;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport Scene from \"./Scene\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nconst firebaseApp = firebase.initializeApp({\n  apiKey: \"AIzaSyAA4zXM0wRBrL1l65NHg_8mQcjg75ew9RQ\",\n  authDomain: \"campus-coloring.firebaseapp.com\",\n  databaseURL: \"https://campus-coloring.firebaseio.com\",\n  projectId: \"campus-coloring\",\n  storageBucket: \"campus-coloring.appspot.com\",\n  messagingSenderId: \"45926036058\",\n  appId: \"1:45926036058:web:a9271137ac86762843de63\",\n  measurementId: \"G-WPPW3TX4QG\",\n});\n\nconst auth = firebaseApp.auth();\nconst database = firebaseApp.database();\nconst storage = firebaseApp.storage();\n\nclass Root extends React.Component {\n  state = {\n    imagesInfo: null,\n    currentLocation: null,\n    user: \"loading\",\n    displayImageIndex: 0,\n    dbData: null,\n  };\n\n  async componentDidMount() {\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        this.setState({ user });\n      } else {\n        this.setState({ user: null });\n      }\n    });\n    const dbData = await database.ref().once(\"value\");\n    this.setState({ dbData: dbData.val() });\n  }\n\n  setImagesInfo = (images) => this.setState({ imagesInfo: images });\n  setLocation = (loc) => this.setState({ currentLocation: loc });\n  setDisplayImageIndex = (index) => this.setState({ displayImageIndex: index });\n\n  render() {\n    return (\n      <div style={{ width: \"100%\", height: \"100%\" }}>\n        {this.state.dbData && (\n          <Scene\n            db={database}\n            storage={storage}\n            dbData={this.state.dbData}\n            setImagesInfo={this.setImagesInfo}\n            setLocation={this.setLocation}\n            displayImageIndex={this.state.displayImageIndex}\n          />\n        )}\n        <App\n          imagesInfo={this.state.imagesInfo}\n          currentLocation={this.state.currentLocation}\n          auth={auth}\n          user={this.state.user}\n          db={database}\n          storage={storage}\n          imgUrls={this.state.dbData && this.state.dbData.image_urls}\n          setDisplayImageIndex={this.setDisplayImageIndex}\n        />\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Root />, document.getElementById(\"root\"));\n\n// setTimeout(ReactDOM.render(<App />, document.getElementById(\"root\")), 1500);\n"],"sourceRoot":""}