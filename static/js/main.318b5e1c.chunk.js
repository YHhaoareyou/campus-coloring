(this["webpackJsonpcampus-coloring"]=this["webpackJsonpcampus-coloring"]||[]).push([[0],{1151:function(e,t){},1152:function(e,t){},1153:function(e,t){},1154:function(e,t){},1160:function(e,t,n){"use strict";n.r(t);var c,i,a,r,o,s,l,j,b=n(0),d=n.n(b),u=n(65),O=n.n(u),h=(n(531),n(239)),x=(n(536),n(537),n(538),n(12)),f=n(47),g=n(109),m=n(185),p=n(48),v={garden:{name:"Garden",range:{minLat:35,maxLat:36,minLong:139,maxLong:140}},51:{name:"51\u53f7\u9928",range:{minLat:35.7056,maxLat:35.7065,minLong:139.7066,maxLong:139.7069}},52:{name:"52\u53f7\u9928\u6b63\u9762",range:{minLat:35.7059,maxLat:35.7061,minLong:139.70695,maxLong:139.70725}},58:{name:"58\u53f7\u9928\u58c1",range:{minLat:35.70625,maxLat:35.70645,minLong:139.7054,maxLong:139.7057}},62:{name:"62\u53f7\u9928\u58c1",range:{minLat:35.70625,maxLat:35.70645,minLong:139.7054,maxLong:139.7057}},"51_60":{name:"51\u300160\u53f7\u9928\u9593\u306e\u5c0f\u8def",range:{minLat:35.7057,maxLat:35.706,minLong:139.7058,maxLong:139.7061}},"60_61":{name:"60\u300161\u53f7\u9928\u9593\u306e\u5c0f\u8def",range:{minLat:35.7057,maxLat:35.706,minLong:139.7061,maxLong:139.7064}}},w=n(2),y=p.a.div(c||(c=Object(f.a)(["\n  position: relative;\n  margin: 0px auto;\n  width: 400px;\n  height: 160px;\n  background-image: url('/img/map.jpeg');\n  background-size: contain;\n"]))),k=p.a.i(i||(i=Object(f.a)(["\n  position: absolute;\n  font-size: 24px;\n"]))),C=(Object(p.a)(k)(a||(a=Object(f.a)(["\ntop: 50px;\nleft: 250px;\n"]))),[{loc:"51",Pin:Object(p.a)(k)(r||(r=Object(f.a)(["\n  top: -10px;\n  left: 170px;\n"])))},{loc:"52",Pin:Object(p.a)(k)(o||(o=Object(f.a)(["\n  top: 60px;\n  left: 210px;\n"])))},{loc:"51_60",Pin:Object(p.a)(k)(s||(s=Object(f.a)(["\n  top: 70px;\n  left: 135px;\n"])))},{loc:"60_61",Pin:Object(p.a)(k)(l||(l=Object(f.a)(["\n  top: 70px;\n  left: 105px;\n"])))},{loc:"62",Pin:Object(p.a)(k)(j||(j=Object(f.a)(["\n  top: 20px;\n  left: 70px;\n"])))}]);var L=function(){var e=Object(b.useState)(null),t=Object(x.a)(e,2),n=t[0],c=t[1],i=Object(b.useState)(""),a=Object(x.a)(i,2),r=a[0],o=a[1],s=Object(b.useState)(!1),l=Object(x.a)(s,2),j=l[0],d=l[1],u=function(){navigator.geolocation.getCurrentPosition((function(e){c(e.coords),j&&d(!1)}),(function(e){d(!0)}))};Object(b.useEffect)((function(){u();var e=setInterval(u,5e3);return function(){return clearInterval(e)}}),[]);var O=function(e){return n&&e&&n.latitude>=e.minLat&&n.latitude<=e.maxLat&&n.longitude>=e.minLong&&n.longitude<=e.maxLong};return Object(w.jsxs)("div",{style:{paddingTop:"100px"},children:[Object(w.jsx)("h3",{children:"\u5834\u6240\u3092\u9078\u629e"}),!n&&Object(w.jsxs)("p",{children:[Object(w.jsx)("i",{className:"bi bi-arrow-clockwise"})," \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u4e2d..."]}),j&&Object(w.jsx)("p",{children:"\u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u5931\u6557\u3002\u4f4d\u7f6e\u60c5\u5831\u306e\u53d6\u5f97\u3092\u8a31\u53ef\u3057\u3001\u906e\u853d\u7269\u306e\u306a\u3044\u7a7a\u9593\u306b\u79fb\u52d5\u3057\u3066\u6570\u79d2\u5f85\u3063\u3066\u304f\u3060\u3055\u3044\u3002"}),Object(w.jsx)(y,{children:C.map((function(e){var t=e.loc,n=e.Pin;return Object(w.jsx)(n,{onClick:function(){return o(t)},className:"bi bi-geo-alt-fill",style:{color:O(v[t].range)?"orange":"black"}},t)}))}),Object(w.jsxs)(m.a,{centered:!0,show:""!==r,onHide:function(){return o("")},children:[Object(w.jsx)(m.a.Header,{closeButton:!0,children:Object(w.jsx)(m.a.Title,{children:r&&v[r].name})}),Object(w.jsxs)(m.a.Body,{style:{textAlign:"center"},children:[Object(w.jsx)("img",{src:"/img/loc/".concat(r,".jpeg"),width:"100%",alt:"View of the location"}),r&&(O(v[r].range)||"garden"===r)?Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:"\u2191\u306e\u666f\u8272\u306b\u5411\u3044\u3066\u304f\u3060\u3055\u3044"}),Object(w.jsx)(h.a,{to:"/"+r,children:Object(w.jsx)(g.a,{variant:"outline-primary",children:"\u7d75\u3092\u89b3\u308b"})})]}):Object(w.jsx)("p",{children:"\u3053\u306e\u5834\u6240\u306b\u79fb\u52d5\u3057\u3001\u6570\u79d2\u5f85\u3064\u3068\u7d75\u304c\u898b\u3048\u308b\u3088"})]})]})]})};var N,S,_,I=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(L,{})})},T=n(4),P=n(6),M=p.a.div(N||(N=Object(f.a)(["\n  position: absolute;\n  top: 50vh;\n  left: 0;\n"]))),E=p.a.div(S||(S=Object(f.a)(["\n  position: absolute;\n  top: 50vh;\n  right: 0;\n"]))),A=Object(p.a)(g.a)(_||(_=Object(f.a)(["\n  background: rgba(255, 255, 255, 0.3);\n  color: rgba(200, 200, 200);\n  border: none;\n  font-size: 36px;\n  padding: 0px;\n"])));var B,R,z=function(e){var t=e.switchPrev,n=e.switchNext;return Object(w.jsxs)(d.a.Fragment,{children:[Object(w.jsx)(M,{children:Object(w.jsx)(A,{variant:"light",onClick:t,children:Object(w.jsx)("i",{className:"bi bi-chevron-compact-left"})})}),Object(w.jsx)(E,{children:Object(w.jsx)(A,{variant:"light",onClick:n,children:Object(w.jsx)("i",{className:"bi bi-chevron-compact-right"})})})]})},U=n(1167),F=n(1168),D=n(1169),H=n(1175),W=Object(p.a)(U.a)(B||(B=Object(f.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(248, 249, 250, 0.5);\n  padding: 10px;\n  padding-right: 20px;\n"]))),V=Object(p.a)(g.a)(R||(R=Object(f.a)(["\n  background: rgba(255, 255, 255, 0.5);\n  border: none;\n  width: 100%;\n"])));var G,Q,J,X=function(e){var t=e.imgInfo,n=e.openCanvas,c=e.canvasVisibility,i=e.likeTrigger,a=Object(b.useState)(!1),r=Object(x.a)(a,2),o=r[0],s=r[1],l=Object(b.useState)(t.likes?Object.keys(t.likes).length:0),j=Object(x.a)(l,2),d=j[0],u=j[1],O=Object(b.useState)(t.likes&&Object.keys(t.likes).includes("26577319")),h=Object(x.a)(O,2),f=h[0],p=h[1];return!c&&Object(w.jsxs)(W,{children:[Object(w.jsxs)(F.a,{children:[Object(w.jsx)(D.a,{xs:8,children:Object(w.jsx)(H.a,{style:{height:"100px",overflowY:"scroll"},children:Object(w.jsxs)(H.a.Body,{style:{padding:"5px"},children:[Object(w.jsx)(H.a.Title,{as:"h6",style:{margin:"5px"},children:t.title}),Object(w.jsx)(H.a.Text,{style:{fontSize:"14px"},children:t.detail})]})})}),Object(w.jsxs)(D.a,{xs:4,children:[Object(w.jsxs)(F.a,{children:[Object(w.jsx)(D.a,{style:{padding:0},children:Object(w.jsxs)(V,{variant:"light",size:"sm",onClick:function(){window.location.href=window.location.origin+window.location.pathname+"?mode=user&uid="+t.creator_id},children:[Object(w.jsx)("i",{className:"bi bi-person"}),Object(w.jsx)("br",{}),"\u30e6\u30fc\u30b6"]})}),Object(w.jsx)(D.a,{style:{padding:0},children:Object(w.jsxs)(V,{variant:"light",size:"sm",onClick:function(){i(),u(f?d-1:d+1),p(!f)},children:[Object(w.jsx)("i",{className:"bi bi-heart",style:{color:f?"red":"black"}}),Object(w.jsx)("br",{}),d]})})]}),Object(w.jsxs)(F.a,{children:[Object(w.jsx)(D.a,{style:{padding:0},children:Object(w.jsxs)(V,{variant:"light",size:"sm",disabled:!t.prev_img_ids,onClick:function(){window.location.href=window.location.origin+window.location.pathname+"?mode=base&bid="+t.id},children:[Object(w.jsx)("i",{className:"bi bi-collection"}),Object(w.jsx)("br",{}),"\u524d\u4f5c\u3078"]})}),Object(w.jsx)(D.a,{style:{padding:0},children:Object(w.jsxs)(V,{variant:"light",size:"sm",onClick:function(){return s(!0)},children:[Object(w.jsx)("i",{className:"bi bi-pencil"}),Object(w.jsx)("br",{}),"\u63cf\u3053\u3046"]})})]})]})]}),Object(w.jsxs)(m.a,{centered:!0,show:o,onHide:function(){return s(!1)},children:[Object(w.jsx)(m.a.Header,{closeButton:!0,children:Object(w.jsx)(m.a.Title,{children:"\u3069\u3093\u306a\u7d75\u3092\u63cf\u304d\u305f\u3044\uff1f"})}),Object(w.jsxs)(m.a.Body,{style:{textAlign:"center"},children:[Object(w.jsx)(g.a,{variant:"outline-primary",onClick:function(){n({isNew:!0}),s(!1)},children:"\u65b0\u3057\u304f\u63cf\u3053\u3046"}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(g.a,{variant:"outline-primary",onClick:function(){n({isNew:!1}),s(!1)},children:"\u3053\u308c\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u63cf\u3053\u3046"})]})]})]})},q=n(30),K=n(186),Y=n(37),Z=Object(Y.b)({key:"currentLocState",default:""}),$=Object(Y.b)({key:"currentImgIdState",default:""}),ee=Object(Y.b)({key:"currentImgSrcState",default:""}),te=Object(Y.b)({key:"currentImgAngleState",default:0}),ne=Object(Y.b)({key:"userState",default:null,dangerouslyAllowMutability:!0}),ce=n(525),ie=n(1170),ae=n(1173),re=n(112),oe=function(){var e=new re.a,t=Object(re.b)();return Object(re.d)(t,e)},se=function(){return Object(Y.d)(ne)},le=n(336),je=n(61),be=n(520),de=n.n(be),ue=n(521),Oe=Object(p.a)(U.a)(G||(G=Object(f.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100vw;\n  height: 120px;\n  padding: 5px;\n  background-color: rgba(248, 249, 250, 0.5);\n"]))),he=Object(p.a)(g.a)(Q||(Q=Object(f.a)(["\n  margin: 0px;\n  margin-bottom: 2px;\n  padding: 0px;\n  width: 60px;\n  height: 35px;\n"]))),xe=Object(p.a)(he)(J||(J=Object(f.a)(["\n  width: 50px;\n  height: 50px;\n"])));function fe(e,t){var n=window;return{width:n.innerWidth,height:n.innerHeight}}function ge(e,t){ue.fabric.Image.fromURL(e,(function(e){e.scaleToWidth(fe().width),t.add(e.set({left:0,top:0}))}),{crossOrigin:"Anonymous"})}var me=function(e){var t=e.closeCanvas,n=e.basePrevIds,c=e.isNew,i=se(),a=Object(Y.d)(Z),r=Object(Y.d)($),o=Object(Y.d)(ee),s=Object(b.useState)(fe()),l=Object(x.a)(s,2),j=l[0],d=l[1],u=Object(b.useRef)(null),O=Object(b.useState)("#000"),h=Object(x.a)(O,2),f=h[0],m=h[1],p=Object(b.useState)(5),v=Object(x.a)(p,2),y=v[0],k=v[1],C=Object(b.useState)("transparent"),L=Object(x.a)(C,2),N=L[0],S=L[1],_=Object(b.useState)(je.Tools.Pencil),I=Object(x.a)(_,2),M=I[0],E=I[1],A=Object(b.useState)(!1),B=Object(x.a)(A,2),R=B[0],z=B[1],U=Object(b.useState)(!1),H=Object(x.a)(U,2),W=H[0],V=H[1],G=Object(b.useState)(0),Q=Object(x.a)(G,2),J=Q[0],X=Q[1];Object(b.useEffect)((function(){d(fe()),c||ge(o,u.current._fc)}),[c,o]),Object(b.useEffect)((function(){window.addEventListener("deviceorientation",(function(e){var t=e.beta;X(Math.round(100*t)/100)}))}),[]);return Object(w.jsxs)("div",{style:{position:"absolute",zIndex:1e3,left:0,backgroundColor:"rgba(255, 255, 255, 0.5)",borderBottom:"5px solid #aaa"},children:[Object(w.jsx)(je.SketchField,{name:"sketch",className:"canvas-area",ref:u,lineColor:f,lineWidth:y,fillColor:N||"transparent",width:j.width,height:3*j.width/2,forceValue:!0,onChange:function(){var e,t=R,n=null===(e=u.current)||void 0===e?void 0:e.canUndo();t!==n&&z(n)},tool:M,imageFormat:"jpeg"}),Object(w.jsx)(Oe,{children:Object(w.jsxs)(F.a,{children:[Object(w.jsxs)(D.a,{xs:7,style:{paddingRight:"5px"},children:[Object(w.jsx)("div",{children:Object(w.jsxs)(ie.a,{children:[Object(w.jsx)(g.a,{variant:M===je.Tools.Pencil?"secondary":"light",onClick:function(){return E(je.Tools.Pencil)},children:Object(w.jsx)("i",{className:"bi bi-pencil"})}),Object(w.jsx)(g.a,{variant:M===je.Tools.Line?"secondary":"light",onClick:function(){return E(je.Tools.Line)},children:Object(w.jsx)("i",{className:"bi bi-slash-lg"})}),Object(w.jsx)(g.a,{variant:M===je.Tools.Rectangle?"secondary":"light",onClick:function(){return E(je.Tools.Rectangle)},children:Object(w.jsx)("i",{className:"bi bi-square"})}),Object(w.jsx)(g.a,{variant:M===je.Tools.Circle?"secondary":"light",onClick:function(){return E(je.Tools.Circle)},children:Object(w.jsx)("i",{className:"bi bi-circle"})}),Object(w.jsx)(ae.a,{trigger:"click",placement:"top",overlay:function(e){return Object(w.jsxs)(ce.a,Object(P.a)(Object(P.a)({},e),{},{style:Object(P.a)(Object(P.a)({},e.style),{},{padding:"10px"}),children:["\u7dda",Object(w.jsx)("br",{}),Object(w.jsx)(le.a,{id:"lineColor",color:f,onChange:function(e){return m(e.hex)}}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),"\u4e2d\u8eab"," ",Object(w.jsx)(g.a,{style:{padding:"0px 10px"},variant:"secondary",onClick:function(){return S("transparent")},children:"\u4e2d\u8eab\u306a\u3057"}),Object(w.jsx)("br",{}),Object(w.jsx)(le.a,{id:"fillColor",color:N,onChange:function(e){S(e.hex),m("#000"),m(f)}})]}))},style:{position:"relative"},children:Object(w.jsxs)(g.a,{variant:"light",style:{padding:"3px"},children:[Object(w.jsx)("i",{className:"bi bi-palette"})," ",Object(w.jsx)("span",{style:{border:"3px solid"+f,backgroundColor:N,width:"15px",height:"15px",display:"inline-block",verticalAlign:"middle"}})]})})]})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{style:{display:"inline-block",width:"20px"}}),Object(w.jsx)("i",{className:"bi bi-border-width"})," ",Object(w.jsx)("div",{style:{display:"inline-block",verticalAlign:"middle"},children:Object(w.jsx)(de.a,{min:1,max:30,value:y,onChange:function(e){return k(e.target.value)}})})]}),Object(w.jsxs)(ie.a,{children:[Object(w.jsx)(he,{variant:M===je.Tools.Select?"secondary":"light",onClick:function(){return E(je.Tools.Select)},children:Object(w.jsx)("i",{className:"bi bi-hand-index-thumb"})}),Object(w.jsx)(he,{disabled:M!==je.Tools.Select,variant:"light",onClick:function(){try{u.current.removeSelected()}catch(e){alert("\u307e\u305a\u524a\u9664\u3057\u305f\u3044\u30d1\u30fc\u30c4\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044")}},children:Object(w.jsx)("i",{className:"bi bi-trash"})}),Object(w.jsx)(he,{disabled:M!==je.Tools.Select,variant:"light",onClick:function(){try{u.current.copy(),u.current.paste()}catch(e){alert("\u307e\u305a\u30b3\u30d4\u30da\u3057\u305f\u3044\u30d1\u30fc\u30c4\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044")}},children:Object(w.jsx)("i",{className:"bi bi-files"})})]})]}),Object(w.jsxs)(D.a,{xs:5,children:[Object(w.jsxs)(ie.a,{style:{marginBottom:"5px"},children:[Object(w.jsx)(xe,{disabled:!R,variant:"light",onClick:function(){u.current.undo(),z(u.current.canUndo()),V(u.current.canRedo())},children:Object(w.jsx)("i",{className:"bi bi-arrow-90deg-left"})}),Object(w.jsx)(xe,{disabled:!W,variant:"light",onClick:function(){u.current.redo(),z(u.current.canUndo()),V(u.current.canRedo())},children:Object(w.jsx)("i",{className:"bi bi-arrow-90deg-right"})}),Object(w.jsx)(xe,{variant:"light",onClick:function(){u.current.clear(),z(u.current.canUndo()),V(u.current.canRedo()),c||ge(o,u.current._fc)},children:Object(w.jsx)("i",{className:"bi bi-arrow-counterclockwise"})})]}),Object(w.jsxs)(ie.a,{children:[Object(w.jsx)(xe,{variant:"light",onClick:function(){var e,o,s,l=Object(K.b)(),j=Object(q.b)();e=prompt("\u30bf\u30a4\u30c8\u30eb\uff1a"),o=prompt("\u3053\u306e\u4f5c\u54c1\u306b\u3064\u3044\u3066\u306e\u8aac\u660e\uff1a"),s=Date.now(),""===e&&(e=s);var b=u.current.toDataURL();Object(K.d)(Object(K.c)(l,"paintings/"+e),b,"data_url").then((function(e){return Object(K.a)(e.ref)})).then((function(l){Object(q.d)(Object(q.c)(j,"img_urls/"+a+"/"+s),l).then((function(l){Object(q.d)(Object(q.c)(j,"img_info/"+a+"/"+s),{title:e,detail:o,angle:J,creator_id:i.uid,prev_img_ids:!c&&Object(P.a)(Object(T.a)({},r,!0),n)}).then((function(e){Object(q.d)(Object(q.c)(j,"users/"+i.uid+"/img_ids/"+a+"/"+s),!0).then((function(e){Object(q.d)(Object(q.c)(j,"users/"+i.uid+"/name"),i.displayName).then((function(e){alert("\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3057\u305f\uff01"),t(),window.location.href="/"+a+"?pid="+s})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))},children:Object(w.jsx)("i",{className:"bi bi-check-lg"})}),Object(w.jsx)(xe,{disabled:!0,variant:"secondary",onClick:function(){},children:Object(w.jsx)("i",{className:"bi bi-hdd"})}),Object(w.jsx)(xe,{variant:"light",onClick:t,children:Object(w.jsx)("i",{className:"bi bi-x-lg"})})]})]})]})})]})},pe=n(103),ve=n.n(pe);var we=function(e){var t,n=e.loc,c=e.location,i=Object(Y.e)(Z),a=Object(Y.c)($),r=Object(x.a)(a,2),o=r[0],s=r[1],l=Object(Y.e)(ee),j=Object(b.useState)(0),d=Object(x.a)(j,2),u=d[0],O=d[1],h=Object(Y.c)(te),f=Object(x.a)(h,2),m=(f[0],f[1]),p=Object(b.useState)(!1),v=Object(x.a)(p,2),y=v[0],k=v[1],C=Object(b.useState)([]),L=Object(x.a)(C,2),N=L[0],S=L[1],_=Object(b.useState)(!0),I=Object(x.a)(_,2),M=I[0],E=I[1],A=se(),B=function(e){var t=e;Array.isArray(e)||(t=Object.keys(e).map((function(t){return Object(P.a)({id:t},e[t])})));var n=ve.a.parse(c.search).pid;S(t),s(n||t[0].id);var i=n?t.map((function(e){return e.id})).indexOf(n):0;O(i),R(n||t[0].id),m(t[i].angle)},R=function(e){var t=Object(q.b)();Object(q.a)(Object(q.c)(t,"img_urls/"+n+"/"+e)).then((function(e){e.exists()&&l(e.val())})).catch((function(e){return console.error(e)}))},U=function(e){var t=N;1===e?t[u].likes=Object(P.a)(Object(P.a)({},t[u].likes),{},Object(T.a)({},A.uid,!0)):delete t[u].likes[A.uid],S(t)};return Object(b.useEffect)((function(){i(n);var e=ve.a.parse(c.search),t=Object(q.b)();Object(q.a)(Object(q.c)(t,"img_info/"+n)).then((function(c){if(c.exists())if(e.mode&&"base"===e.mode){var i=Object.keys(c.val()[e.bid].prev_img_ids),a={};i.forEach((function(e){a[e]=c.val()[e]})),B(a)}else e.mode&&"user"===e.mode?Object(q.a)(Object(q.c)(t,"users/"+e.uid+"/img_ids/"+n)).then((function(e){var t={};Object.keys(e.val()).forEach((function(e){t[e]=c.val()[e]})),B(t)})):B(c.val())})).catch((function(e){return console.error(e)}))}),[]),Object(w.jsxs)("div",{children:[Object(w.jsx)(z,{switchPrev:function(){if(N.length>1){var e=0===u?N.length-1:u-1;O(e),s(N[e].id),R(N[e].id),m(N[e].angle);var t=ve.a.parse(c.search);t.pid=N[e].id;var n=window.location.origin+window.location.pathname+"?"+ve.a.stringify(t);window.history.replaceState({path:n},"",n)}},switchNext:function(){if(N.length>1){var e=u===N.length-1?0:u+1;O(e),s(N[e].id),R(N[e].id),m(N[e].angle);var t=ve.a.parse(c.search);t.pid=N[e].id;var n=window.location.origin+window.location.pathname+"?"+ve.a.stringify(t);window.history.replaceState({path:n},"",n)}}}),N.length>0?Object(w.jsx)(X,{imgInfo:N[u],openCanvas:function(e){var t=e.isNew;k(!0),E(t)},canvasVisibility:y,likeTrigger:function(){var e=Object(q.b)();N[u].likes&&N[u].likes[A.uid]?Object(q.d)(Object(q.c)(e,"img_info/"+n+"/"+o+"/likes/"+A.uid),null).then((function(e){return U(-1)})):Object(q.d)(Object(q.c)(e,"img_info/"+n+"/"+o+"/likes/"+A.uid),!0).then((function(e){return U(1)}))}}):Object(w.jsx)(g.a,{style:{position:"absolute",bottom:0,left:0,width:"100vw"},onClick:function(){k(!0),E(!0)},children:"\u3053\u306e\u5834\u6240\u3067\u521d\u306e\u4f5c\u54c1\u3092\u63cf\u3053\u3046\uff01"}),y&&Object(w.jsx)(me,{isNew:M,basePrevIds:(null===(t=N[u])||void 0===t?void 0:t.prev_img_ids)||{},closeCanvas:function(){return k(!1)}})]})},ye=n(1172),ke=n(1174),Ce=n(1171);var Le=function(){var e=se(),t=Object(Y.d)(Z),n=Object(b.useState)("Campus as Canvas"),c=Object(x.a)(n,2),i=c[0],a=c[1];return Object(b.useEffect)((function(){var e=ve.a.parse(window.location.search);if(e.mode&&"base"===e.mode){var n=Object(q.b)();Object(q.a)(Object(q.c)(n,"img_info/"+t+"/"+e.bid+"/title")).then((function(e){a("\u300c"+e.val()+"\u300d\u306e\u30d9\u30fc\u30b9\u4f5c\u54c1")}))}else if(e.mode&&"user"===e.mode){var c=Object(q.b)();Object(q.a)(Object(q.c)(c,"users/"+e.uid+"/name")).then((function(e){a(e.val()+"\u306e\u4f5c\u54c1")}))}else t&&a(v[t].name)}),[t]),Object(w.jsx)(ye.a,{style:{position:"absolute",left:0,top:0,width:"100vw",background:"rgba(255, 255, 255, 0.5)"},children:Object(w.jsxs)(U.a,{children:[t&&Object(w.jsx)(ye.a.Collapse,{children:Object(w.jsxs)(ke.a,{className:"me-auto",children:[Object(w.jsx)(g.a,{className:"btn btn-sm",variant:"outline-secondary",onClick:function(){return window.location.href="/"},children:Object(w.jsx)("i",{className:"bi bi-house"})}),Object(w.jsx)("span",{style:{width:"10px"}}),Object(w.jsx)(g.a,{className:"btn btn-sm",variant:"outline-secondary",onClick:function(){return window.history.back()},children:Object(w.jsx)("i",{className:"bi bi-chevron-compact-left"})})]})}),Object(w.jsx)(ye.a.Brand,{children:i}),Object(w.jsxs)(ye.a.Collapse,{children:[Object(w.jsx)(ke.a,{className:"me-auto"}),Object(w.jsx)(ke.a,{children:Object(w.jsxs)(Ce.a,{title:Object(w.jsx)("i",{className:"bi bi-person-circle"})||"\u30ed\u30b0\u30a4\u30f3",drop:"start",children:[Object(w.jsx)("p",{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.displayName}),e?Object(w.jsx)(Ce.a.Item,{onClick:function(){(function(){var e=Object(re.b)();return Object(re.e)(e)})().catch((function(e){return console.error(e)}))},children:"\u30ed\u30b0\u30a2\u30a6\u30c8"}):Object(w.jsx)(Ce.a.Item,{onClick:function(){oe().catch((function(e){return console.error(e)}))},children:"\u30ed\u30b0\u30a4\u30f3"})]})})]})]})})},Ne=function(e){var t=e.children;return function(){var e=Object(b.useState)(!0),t=Object(x.a)(e,2),n=t[0],c=t[1],i=Object(Y.e)(ne);return Object(b.useEffect)((function(){var e=Object(re.b)();return Object(re.c)(e,(function(e){i(e),c(!1)}))}),[i]),n}()?Object(w.jsx)("p",{children:"Loading..."}):t};var Se=function(){var e=se();return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(Ne,{children:Object(w.jsx)("div",{children:e?Object(w.jsxs)("div",{children:[Object(w.jsx)(Le,{}),Object(w.jsxs)(h.b,{children:[Object(w.jsx)(I,{path:"/"}),Object(w.jsx)(we,{path:"/:loc"})]})]}):Object(w.jsx)("div",{children:Object(w.jsx)("button",{onClick:function(){oe().catch((function(e){return console.error(e)}))},children:"\u30ed\u30b0\u30a4\u30f3"})})})})})},_e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1176)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))},Ie=n(524);var Te=function(){var e=Object(Y.d)(Z),t=Object(Y.d)(ee),n=Object(Y.d)($),c=Object(Y.d)(te),i=Object(b.useState)({}),a=Object(x.a)(i,2),r=a[0],o=a[1],s=Object(b.useState)("0.3 1.5 -10"),l=Object(x.a)(s,2),j=l[0],d=l[1],u=Object(b.useState)("0 0 0"),O=Object(x.a)(u,2),h=O[0],f=O[1];return Object(b.useEffect)((function(){var t=Object(q.b)();Object(q.a)(Object(q.c)(t,"img_urls/"+e)).then((function(e){e.exists()&&o(e.val())})).catch((function(e){return console.error(e)})),d("-0.3 ".concat(1.5-Math.round(10*Math.cos(c*Math.PI/180)*100)/100," ").concat(-1*Math.round(10*Math.sin(c*Math.PI/180)*100)/100)),f("".concat(c-90," 0 0"))}),[e]),Object(b.useEffect)((function(){d("-0.3 ".concat(1.5-Math.round(10*Math.cos(c*Math.PI/180)*100)/100," ").concat(-1*Math.round(10*Math.sin(c*Math.PI/180)*100)/100)),f("".concat(c-90," 0 0"))}),[c]),Object(w.jsxs)("a-scene",{id:"a-scene","vr-mode-ui":"enabled: false;",renderer:"logarithmicDepthBuffer: true;",arjs:"trackingMethod: best; sourceType: webcam;debugUIEnabled: false;",children:[Object(w.jsx)("a-assets",{children:r&&Object.keys(r).map((function(e){return Object(w.jsx)("img",{id:e,src:r[e],crossOrigin:"anonymous",alt:"Painting "+e},e)}))}),t&&Object(w.jsx)("a-image",{src:"#"+n,width:10,height:8,position:j,rotation:h})]})};n(1159);Object(Ie.a)({apiKey:"AIzaSyAA4zXM0wRBrL1l65NHg_8mQcjg75ew9RQ",authDomain:"campus-coloring.firebaseapp.com",databaseURL:"https://campus-coloring.firebaseio.com",projectId:"campus-coloring",storageBucket:"campus-coloring.appspot.com",messagingSenderId:"45926036058",appId:"1:45926036058:web:a9271137ac86762843de63",measurementId:"G-WPPW3TX4QG"});var Pe=function(){var e=Object(Y.d)(Z);return Object(w.jsxs)("div",{style:{width:"100%",height:"100%"},children:[e&&Object(w.jsx)(Te,{}),Object(w.jsx)(Se,{})]})};O.a.render(Object(w.jsx)(Y.a,{children:Object(w.jsx)(Pe,{})}),document.getElementById("root")),_e()},531:function(e,t,n){},536:function(e,t,n){},671:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=671},698:function(e,t){},700:function(e,t){},723:function(e,t){},724:function(e,t){},730:function(e,t){},732:function(e,t){},764:function(e,t){},766:function(e,t){},767:function(e,t){},772:function(e,t){},774:function(e,t){},780:function(e,t){},782:function(e,t){},801:function(e,t){},813:function(e,t){},816:function(e,t){},838:function(e,t){}},[[1160,1,2]]]);
//# sourceMappingURL=main.318b5e1c.chunk.js.map