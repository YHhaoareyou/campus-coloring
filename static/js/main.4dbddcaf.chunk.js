(this["webpackJsonpcampus-coloring"]=this["webpackJsonpcampus-coloring"]||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(10),o=n(11),c=n(14),i=n(13),s=n(1),u=n.n(s),l=n(8),h=n.n(l),d=(n(51),n(23)),p=(n(52),n(53),n(78)),m=n(24),j=n(17);function b(){var e=Object(d.a)(["\n  width: 100%;\n  text-align: center;\n"]);return b=function(){return e},e}function f(){var e=Object(d.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]);return f=function(){return e},e}var g=Object(m.a)("div")(f()),v=Object(m.a)("div")(b());var O=function(e){var t=e.isCanvasOpen,n=e.auth,r=e.user;return Object(a.jsxs)(g,{children:[Object(a.jsxs)(v,{children:[r&&"loading"!==r&&Object(a.jsxs)("span",{children:[r.displayName,", welcome! "]}),r?"loading"===r?Object(a.jsx)("h2",{children:"Loading..."}):Object(a.jsx)(p.a,{onClick:function(){try{n.signOut()}catch(e){alert(e)}},children:"Sign out"}):Object(a.jsx)(p.a,{onClick:function(){try{n.signInWithRedirect(new j.a.auth.GoogleAuthProvider)}catch(e){alert(e)}},children:"Sign in"})]}),t&&Object(a.jsx)("canvas",{style:{background:"#fff"},children:"\u3086\u3073\u3086\u3073\uff01"})]})},y=n(28),k=n.n(y),w=n(29),x=n(36),C=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).entityRef=u.a.createRef(),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(a.jsx)("a-nft",{markerhandler:!0,type:"nft",url:"https://yhhaoareyou.github.io/campus-coloring/descriptors/"+this.props.location,smooth:"true",smoothCount:"10",smoothTolerance:".01",smoothThreshold:"5",id:"a-nft","data-location":this.props.location,children:this.props.images.map((function(e){return Object(a.jsx)("a-image",{src:"#"+e.id,width:"500",height:"500",position:"150 0 0",rotation:"-90 0 0"})}))})}}]),n}(u.a.Component),A=n.p+"static/media/hiro-marker.81a8bff1.png",I=(n(60),n(65),function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={locationNames:[],currentLocation:"",currentImages:[],imageUrlsById:{}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=Object(x.a)(k.a.mark((function e(){var t,n,a,r,o,c,i=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.db,e.next=3,t.ref().once("value");case 3:n=e.sent,a=n.val().image_urls,r=n.val().locations,this.setState({imageUrlsById:a,locationNames:Object.keys(r)}),o=function(e){return i.setState({currentImages:e})},c=function(e){return i.setState({currentLocation:e})},window.AFRAME.components.markerhandler||window.AFRAME.registerComponent("markerhandler",{init:function(){this.el.sceneEl.addEventListener("markerFound",(function(e){var n=e.target.dataset.location;console.log(n),c(n),t.ref("locations").child(n).once("value",(function(e){var t=[],n=e.val();for(var a in n)t.push(Object(w.a)(Object(w.a)({},n[a]),{},{id:a}));o(t)}))})),this.el.sceneEl.addEventListener("markerLost",(function(e){return o([])}))}});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){delete window.AFRAME.components.markerhandler}},{key:"render",value:function(){var e=this.state,t=e.locationNames,n=e.currentLocation,r=e.currentImages,o=e.imageUrlsById,c=Object.keys(o).length>0,i=t.length>0;return Object(a.jsxs)("a-scene",{id:"a-scene","vr-mode-ui":"enabled: false;",renderer:"logarithmicDepthBuffer: true;",embedded:!0,arjs:"trackingMethod: best; sourceType: webcam;debugUIEnabled: false;",children:[c&&Object(a.jsxs)("a-assets",{children:[Object(a.jsx)("img",{id:"hiroMarker",src:A,alt:"hiroMarker"}),Object.keys(o).map((function(e){return Object(a.jsx)("img",{id:e,src:o[e],alt:e},e)}))]}),c&&i&&t.map((function(e){return Object(a.jsx)(C,{location:e,images:n===e&&r.length>0?r:[]},e)})),Object(a.jsx)("a-entity",{camera:!0})]})}}]),n}(u.a.Component)),S=(n(62),j.a.initializeApp({apiKey:"AIzaSyAA4zXM0wRBrL1l65NHg_8mQcjg75ew9RQ",authDomain:"campus-coloring.firebaseapp.com",databaseURL:"https://campus-coloring.firebaseio.com",projectId:"campus-coloring",storageBucket:"campus-coloring.appspot.com",messagingSenderId:"45926036058",appId:"1:45926036058:web:a9271137ac86762843de63",measurementId:"G-WPPW3TX4QG"})),M=S.auth(),E=S.database(),L=S.storage(),R=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isCanvasOpen:!1,user:"loading"},e.openCanvas=function(){return e.setState({isCanvasOpen:!0})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;M.onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(a.jsx)(I,{openCanvas:this.openCanvas,db:E,storage:L}),Object(a.jsx)(O,{isCanvasOpen:this.state.isCanvasOpen,auth:M,user:this.state.user})]})}}]),n}(u.a.Component);h.a.render(Object(a.jsx)(R,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.4dbddcaf.chunk.js.map