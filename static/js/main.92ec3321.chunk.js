(this["webpackJsonpcampus-coloring"]=this["webpackJsonpcampus-coloring"]||[]).push([[0],{1181:function(e,t){},1182:function(e,t){},1183:function(e,t){},1184:function(e,t){},1192:function(e,t,i){"use strict";i.r(t);var n,c,a,o,r,s,l,d,b,j,u,h,f,O,p,x=i(0),g=i.n(x),m=i(66),v=i.n(m),w=(i(555),i(252)),y=(i(560),i(561),i(562),i(10)),k=i(35),C=i(83),N=i(195),S=i(193),E=i(36),M={garden:{nameJA:"\u4e2d\u5ead",descriptionJA:"\u30c6\u30b9\u30c8\u7528",nameEN:"Courtyard",descriptionEN:"Test",range:{minLat:35,maxLat:36,minLong:139,maxLong:140}},55:{nameJA:"55\u53f7\u9928\u5916",descriptionJA:"\u5916\u306e\u5eca\u4e0b\u304b\u3089\u3001\u4e2d\u5ead\u5411\u304d",nameEN:"Bldg. 55",descriptionEN:"From the corridor outside, facing the courtyard",range:{minLat:35.7058,maxLat:35.7061,minLong:139.7078,maxLong:139.7083}},"54_55":{nameJA:"54\u300155\u53f7\u9928\u306e\u9593",descriptionJA:"55\u53f7\u9928\u306e\u5165\u53e3\u524d\u304b\u3089\u300154-55\u53f7\u9928\u9023\u7d61\u901a\u8def\u5411\u304d",nameEN:"Bldg. 54-55",descriptionEN:"From the front of Bldg. 55's entrance, facing skywalks between Bldg. 54 & 55",range:{minLat:35.70565,maxLat:35.7059,minLong:139.70775,maxLong:139.7082}},51:{nameJA:"51\u53f7\u9928",descriptionJA:"\u4e00\u968e\u306e\u5357\u5074\u5165\u53e3\u306e\u524d\u304b\u3089\u3001\u897f\u5074\u306e\u5730\u4e0b\u306b\u5411\u3051\u308b",nameEN:"Bldg. 51",descriptionEN:"From the front of south entrance (1F), facing the basement on the West side",range:{minLat:35.70575,maxLat:35.706,minLong:139.7066,maxLong:139.7069}},"51_60_top":{nameJA:"51\u300160\u53f7\u9928\u306e\u9593",descriptionJA:"\u5357\u5074\u306e\u7a7a\u4e2d\u901a\u8def\u304b\u3089",nameEN:"Bldg. 51-60",descriptionEN:"From the south skywalk (2F)",range:{minLat:35.7056,maxLat:35.706,minLong:139.7061,maxLong:139.7065}},"60_61":{nameJA:"60\u300161\u53f7\u9928\u306e\u9593",descriptionJA:"\u5357\u5074\u306e\u5730\u9762\u901a\u8def\u304b\u3089",nameEN:"Bldg. 60-61",descriptionEN:"From the south passageway (1F)",range:{minLat:35.7056,maxLat:35.706,minLong:139.7057,maxLong:139.7061}}},L=i(1206),R=i(27),P=i(524),T=Object(P.recoilPersist)().persistAtom,A=Object(R.atom)({key:"currentLocState",default:""}),I=Object(R.atom)({key:"currentImgIdState",default:""}),_=Object(R.atom)({key:"currentImgSrcState",default:""}),D=Object(R.atom)({key:"currentImgAngleState",default:0}),H=Object(R.atom)({key:"currentImgSizeState",default:null}),B=Object(R.atom)({key:"isRemoteState",default:!1,effects_UNSTABLE:[T]}),V=Object(R.atom)({key:"userState",default:null,dangerouslyAllowMutability:!0}),G=i(1),z=E.a.div(n||(n=Object(k.a)(["\n  position: relative;\n  margin: 0px auto;\n  width: 375px;\n  height: 150px;\n  background-image: url('/img/map.jpeg');\n  background-size: contain;\n"]))),U=E.a.i(c||(c=Object(k.a)(["\n  position: absolute;\n  font-size: 24px;\n"]))),F=(Object(E.a)(U)(a||(a=Object(k.a)(["\n  top: 50px;\n  left: 240px;\n"]))),Object(E.a)(U)(o||(o=Object(k.a)(["\n  top: 75px;\n  left: 162px;\n"])))),J=Object(E.a)(U)(r||(r=Object(k.a)(["\n  top: 70px;\n  left: 125px;\n"]))),W=Object(E.a)(U)(s||(s=Object(k.a)(["\n  top: 70px;\n  left: 95px;\n"]))),K=Object(E.a)(U)(l||(l=Object(k.a)(["\n  top: 50px;\n  left: 290px;\n"]))),Q=Object(E.a)(U)(d||(d=Object(k.a)(["\n  top: 75px;\n  left: 280px;\n"]))),X=E.a.i(b||(b=Object(k.a)(["\n  position: absolute;\n  font-size: 18px;\n"]))),Y=(Object(E.a)(X)(j||(j=Object(k.a)(["\n  top: 55px;\n  left: 230px;\n"]))),[{loc:"51",Pin:F,Dir:Object(E.a)(X)(u||(u=Object(k.a)(["\n  top: 80px;\n  left: 150px;\n"]))),direction:"left"},{loc:"51_60_top",Pin:J,Dir:Object(E.a)(X)(h||(h=Object(k.a)(["\n  top: 55px;\n  left: 128px;\n"]))),direction:"up"},{loc:"60_61",Pin:W,Dir:Object(E.a)(X)(f||(f=Object(k.a)(["\n  top: 55px;\n  left: 98px;\n"]))),direction:"up"},{loc:"55",Pin:K,Dir:Object(E.a)(X)(O||(O=Object(k.a)(["\n  top: 55px;\n  left: 280px;\n"]))),direction:"left"},{loc:"54_55",Pin:Q,Dir:Object(E.a)(X)(p||(p=Object(k.a)(["\n  top: 98px;\n  left: 283px;\n"]))),direction:"down"}]);var q=function(){var e=Object(L.a)(),t=e.t,i=e.i18n,n=Object(x.useState)(null),c=Object(y.a)(n,2),a=c[0],o=c[1],r=Object(x.useState)(""),s=Object(y.a)(r,2),l=s[0],d=s[1],b=Object(x.useState)(!1),j=Object(y.a)(b,2),u=j[0],h=j[1],f=Object(R.useRecoilValue)(B),O=function(){navigator.geolocation.getCurrentPosition((function(e){o(e.coords),u&&h(!1)}),(function(e){h(!0)}))};Object(x.useEffect)((function(){if(!f){O();var e=setInterval(O,5e3);return function(){return clearInterval(e)}}}),[f]);var p=function(e){return a&&e&&a.latitude>=e.minLat&&a.latitude<=e.maxLat&&a.longitude>=e.minLong&&a.longitude<=e.maxLong};return Object(G.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(G.jsx)("h3",{children:t("LocationsMenu.Choose location")}),!f&&!a&&Object(G.jsxs)(S.a,{variant:"warning",style:{margin:"1em"},children:[Object(G.jsx)("i",{className:"bi bi-arrow-clockwise"})," ",t("LocationsMenu.Retrieving location")]}),!f&&u&&Object(G.jsx)(S.a,{variant:"danger",style:{margin:"1em"},children:t("LocationsMenu.Failed to retrieve")}),Object(G.jsx)(z,{children:Y.map((function(e){var t=e.loc,i=e.Pin,n=e.Dir,c=e.direction;return Object(G.jsxs)("span",{children:[Object(G.jsx)(i,{onClick:function(){return d(t)},className:"bi bi-geo-alt-fill",style:{color:p(M[t].range)||f?"orange":"#a52a2a"}},"pin"+t),Object(G.jsx)(n,{onClick:function(){return d(t)},className:"bi bi-caret-"+c+"-fill",style:{color:p(M[t].range)||f?"orange":"#a52a2a"}},"dir"+t)]})}))}),Object(G.jsxs)(N.a,{centered:!0,show:""!==l,onHide:function(){return d("")},children:[Object(G.jsx)(N.a.Header,{closeButton:!0,children:Object(G.jsx)(N.a.Title,{children:l&&("ja"===i.language?M[l].nameJA:M[l].nameEN)})}),Object(G.jsxs)(N.a.Body,{style:{textAlign:"center",fontSize:"14px"},children:[Object(G.jsx)("p",{children:l&&("ja"===i.language?M[l].descriptionJA:M[l].descriptionEN)}),Object(G.jsx)("img",{src:"/img/loc/".concat(l,".jpeg"),width:"70%",alt:"View of the location"}),l&&(p(M[l].range)||"garden"===l||f)?Object(G.jsxs)("div",{style:{marginTop:"1em"},children:[!f&&Object(G.jsx)(S.a,{variant:"success",children:t("LocationsMenu.Point camera")}),Object(G.jsx)(w.a,{to:"/"+l,children:Object(G.jsx)(C.a,{variant:"outline-primary",children:t("LocationsMenu.View graffiti")})})]}):Object(G.jsx)("div",{style:{marginTop:"1em"},children:Object(G.jsxs)(S.a,{variant:"warning",style:{padding:"5px"},children:[t("LocationsMenu.Move here and wait"),Object(G.jsx)("br",{}),t("LocationsMenu.Please reload")]})})]})]})]})},Z=i(533),$=i(116),ee=i(163),te=i(532);var ie,ne,ce,ae=function(){var e=Object(L.a)().t,t=Object(R.useRecoilState)(B),i=Object(y.a)(t,2),n=i[0],c=i[1];return Object(G.jsxs)("div",{style:{height:"calc(100vh - 56px)",overflowY:"auto",marginTop:"56px",fontSize:"14px"},children:[Object(G.jsx)("br",{}),Object(G.jsxs)(te.a,{children:[Object(G.jsxs)(C.a,{disabled:!n,variant:n?"outline-primary":"primary",onClick:function(){return c(!1)},size:"sm",children:[!n&&"\u2714\ufe0e"," At Campus (AR)"]}),Object(G.jsxs)(C.a,{disabled:n,variant:n?"primary":"outline-primary",onClick:function(){return c(!0)},size:"sm",children:[n&&"\u2714\ufe0e"," At Home"]})]}),Object(G.jsx)(q,{}),Object(G.jsxs)($.a,{children:[Object(G.jsxs)($.a.Item,{eventKey:"0",children:[Object(G.jsx)($.a.Header,{children:e("Home.Explanation")}),Object(G.jsx)($.a.Body,{children:Object(G.jsxs)(ee.a,{variant:"flush",style:{textAlign:"left"},children:[Object(G.jsx)(ee.a.Item,{children:e("Home.Explanation 1")}),!n&&Object(G.jsx)(ee.a.Item,{children:e("Home.Explanation 2")}),!n&&Object(G.jsx)(ee.a.Item,{children:e("Home.Explanation 3")}),n&&Object(G.jsx)(ee.a.Item,{children:e("Home.Explanation 4")})]})})]}),Object(G.jsxs)($.a.Item,{eventKey:"1",children:[Object(G.jsx)($.a.Header,{children:e("Home.Locations list")}),Object(G.jsx)($.a.Body,{children:Object(G.jsxs)(Z.a,{striped:!0,bordered:!0,children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:e("Home.Location")}),Object(G.jsx)("th",{children:e("Home.Viewpoint")}),!n&&Object(G.jsx)("th",{children:e("Home.Rain")})]})}),Object(G.jsxs)("tbody",{children:[Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:e("Home.55")}),Object(G.jsx)("td",{children:e("Home.55 viewpoint")}),!n&&Object(G.jsx)("td",{children:"\u25ef"})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:e("Home.54-55")}),Object(G.jsx)("td",{children:e("Home.54-55 viewpoint")}),!n&&Object(G.jsx)("td",{children:"\xd7"})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:e("Home.51")}),Object(G.jsx)("td",{children:e("Home.51 viewpoint")}),!n&&Object(G.jsx)("td",{children:"\u25ef"})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:e("Home.51-60")}),Object(G.jsx)("td",{children:e("Home.51-60 viewpoint")}),!n&&Object(G.jsx)("td",{children:"\u25ef"})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:e("Home.60-61")}),Object(G.jsx)("td",{children:e("Home.60-61 viewpoint")}),!n&&Object(G.jsx)("td",{children:"\xd7"})]})]})]})})]})]})]})},oe=i(5),re=i(4),se=E.a.div(ie||(ie=Object(k.a)(["\n  position: absolute;\n  top: 50vh;\n  left: 0;\n"]))),le=E.a.div(ne||(ne=Object(k.a)(["\n  position: absolute;\n  top: 50vh;\n  right: 0;\n"]))),de=Object(E.a)(C.a)(ce||(ce=Object(k.a)(["\n  background: rgba(255, 255, 255, 0.3);\n  color: rgba(200, 200, 200);\n  border: none;\n  font-size: 36px;\n  padding: 0px;\n"])));var be,je,ue,he,fe,Oe=function(e){var t=e.switchPrev,i=e.switchNext;return Object(G.jsxs)(g.a.Fragment,{children:[Object(G.jsx)(se,{children:Object(G.jsx)(de,{variant:"light",onClick:t,children:Object(G.jsx)("i",{className:"bi bi-chevron-compact-left"})})}),Object(G.jsx)(le,{children:Object(G.jsx)(de,{variant:"light",onClick:i,children:Object(G.jsx)("i",{className:"bi bi-chevron-compact-right"})})})]})},pe=i(1199),xe=i(1205),ge=i(117),me=function(){var e=new ge.a,t=Object(ge.b)();return Object(ge.d)(t,e)},ve=function(){return Object(R.useRecoilValue)(V)},we=function(e){var t=e.isOpen,i=e.closeModal,n=e.openCanvas,c=Object(L.a)().t;return Object(G.jsxs)(N.a,{centered:!0,show:t,onHide:i,children:[Object(G.jsx)(N.a.Header,{closeButton:!0,children:Object(G.jsx)(N.a.Title,{children:c("NewGraffitiModal.Which graffiti")})}),Object(G.jsxs)(N.a.Body,{style:{textAlign:"center"},children:[Object(G.jsx)(C.a,{variant:"outline-primary",onClick:function(){n({mode:"new"}),i()},children:c("NewGraffitiModal.New graffiti")}),Object(G.jsx)("br",{}),Object(G.jsx)("br",{}),Object(G.jsx)(C.a,{variant:"outline-primary",onClick:function(){n({mode:"overwrite"}),i()},children:c("NewGraffitiModal.Graffiti based on this one")})]})]})},ye=i(24),ke=function(e){var t=e.isOpen,i=e.closeModal,n=e.openCanvas,c=e.imgInfo,a=Object(R.useRecoilValue)(B),o=Object(R.useRecoilValue)(A),r=Object(L.a)().t;return Object(G.jsxs)(N.a,{centered:!0,show:t,onHide:i,children:[Object(G.jsx)(N.a.Header,{closeButton:!0,children:Object(G.jsx)(N.a.Title,{children:r("EditGraffitiModal.Edit/Delete")})}),Object(G.jsxs)(N.a.Body,{style:{textAlign:"center"},children:[Object(G.jsxs)(C.a,{variant:"outline-primary",onClick:function(){n({mode:"edit"}),i()},children:[Object(G.jsx)("i",{className:"bi bi-pencil-square"})," ",r("EditGraffitiModal.Edit graffiti")]}),Object(G.jsx)("br",{}),Object(G.jsx)("br",{}),Object(G.jsxs)(C.a,{variant:"outline-primary",onClick:function(){var e=Object(ye.b)(),t=prompt(r("EditGraffitiModal.Title label"),c.title),i=prompt(r("EditGraffitiModal.Details label"),c.detail);Object(ye.d)(Object(ye.c)(e,(a?"remote/":"")+"img_info/"+o+"/"+c.id+"/title"),t).then((function(t){Object(ye.d)(Object(ye.c)(e,(a?"remote/":"")+"img_info/"+o+"/"+c.id+"/detail"),i).then((function(e){alert(r("EditGraffitiModal.Updated")),window.location.href="/"+o+"?pid="+c.id})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))},children:[Object(G.jsx)("i",{className:"bi bi-brush"})," ",r("EditGraffitiModal.Edit title and details")]}),Object(G.jsx)("br",{}),Object(G.jsx)("br",{}),Object(G.jsxs)(C.a,{variant:"outline-danger",onClick:function(){var e=Object(ye.b)();Object(ye.d)(Object(ye.c)(e,(a?"remote/":"")+"img_urls/"+o+"/"+c.id),null).then((function(t){Object(ye.d)(Object(ye.c)(e,(a?"remote/":"")+"img_info/"+o+"/"+c.id),null).then((function(t){Object(ye.d)(Object(ye.c)(e,(a?"remote/":"")+"users/"+c.creator_id+"/img_ids/"+o+"/"+c.id),null).then((function(e){alert(r("EditGraffitiModal.Deleted")),window.location.href="/"+o})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))},children:[Object(G.jsx)("i",{className:"bi bi-trash"})," ",r("EditGraffitiModal.Delete")]})]})]})},Ce=Object(E.a)(pe.a)(be||(be=Object(k.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background-color: transparent;\n  padding-bottom: 10px;\n"]))),Ne=Object(E.a)(C.a)(je||(je=Object(k.a)(["\n  background: transparent;\n  border: 0.5px solid #fff;\n  border-bottom: none;\n  height: 30px;\n  color: #fff;\n"]))),Se=Object(E.a)(xe.a)(ue||(ue=Object(k.a)(["\n  ","\n  height: 100px;\n  overflow-y: scroll;\n  background-color: rgba(0, 0, 0, 0.4);\n  color: #fff;\n  border: 0.5px solid #fff;\n  border-radius: 10px;\n"])),(function(e){return!e.isOpen&&"display: none;"})),Ee=Object(E.a)(C.a)(he||(he=Object(k.a)(["\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  width: 25px;\n  height: 25px;\n  padding: 0px;\n  background-color: transparent;\n  border: none;\n  font-size: 24px;\n  line-height: 0px;\n  border-radius: 50%;\n"]))),Me=Object(E.a)(C.a)(fe||(fe=Object(k.a)(["\n  width: 100%;\n  height: 30px;\n  padding: 0px;\n  font-size: 36px;\n  line-height: 0px;\n  background: rgba(255, 255, 255, 0.3);\n  color: rgb(200, 200, 200);\n  border: none;\n"])));var Le,Re,Pe,Te,Ae,Ie=function(e){var t=e.imgInfo,i=e.openCanvas,n=e.likeTrigger,c=ve(),a=Object(x.useState)(!1),o=Object(y.a)(a,2),r=o[0],s=o[1],l=Object(x.useState)(!1),d=Object(y.a)(l,2),b=d[0],j=d[1],u=Object(x.useState)(t.likes?Object.keys(t.likes).length:0),h=Object(y.a)(u,2),f=h[0],O=h[1],p=Object(x.useState)(t.likes&&Object.keys(t.likes).includes(c.uid)),g=Object(y.a)(p,2),m=g[0],v=g[1],w=Object(x.useState)(!0),k=Object(y.a)(w,2),C=k[0],N=k[1],S=Object(L.a)().t;return Object(x.useEffect)((function(){O(t.likes?Object.keys(t.likes).length:0),v(t.likes&&Object.keys(t.likes).includes(c.uid))}),[t]),Object(G.jsxs)(Ce,{children:[!C&&Object(G.jsx)(Me,{variant:"outline-light",onClick:function(){return N(!0)},children:Object(G.jsx)("i",{className:"bi bi-chevron-compact-up"})}),Object(G.jsx)(Se,{isOpen:C,children:Object(G.jsxs)(xe.a.Body,{style:{padding:0,position:"relative"},children:[Object(G.jsx)(Ee,{variant:"outline-light",onClick:function(){return N(!1)},children:Object(G.jsx)("i",{className:"bi bi-x"})}),Object(G.jsx)(xe.a.Title,{as:"h6",style:{height:"15px",margin:"5px"},children:t.title}),Object(G.jsx)(xe.a.Text,{style:{fontSize:"14px",height:"40px",margin:"5px"},children:t.detail}),Object(G.jsxs)(te.a,{style:{width:"100%",margin:0,height:"30px"},children:[t.creator_id===c.uid?Object(G.jsxs)(Ne,{variant:"light",size:"sm",onClick:function(){return j(!0)},style:{borderLeft:"none",borderTopLeftRadius:0},children:[Object(G.jsx)("i",{className:"bi bi-gear"})," ",S("ActionMenu.Edit/Delete")]}):Object(G.jsxs)(Ne,{variant:"light",size:"sm",onClick:function(){window.location.href=window.location.origin+window.location.pathname+"?mode=user&uid="+t.creator_id},style:{borderLeft:"none",borderTopLeftRadius:0},children:[Object(G.jsx)("i",{className:"bi bi-person"})," ",S("ActionMenu.User")]}),(null===t||void 0===t?void 0:t.prev_img_ids)&&Object(G.jsxs)(Ne,{variant:"light",size:"sm",onClick:function(){window.location.href=window.location.origin+window.location.pathname+"?mode=base&bid="+t.id},style:{marginBottom:0},children:[Object(G.jsx)("i",{className:"bi bi-collection"})," ",S("ActionMenu.Based works")]}),Object(G.jsxs)(Ne,{variant:"light",size:"sm",onClick:function(){n(),O(m?f-1:f+1),v(!m)},children:[Object(G.jsx)("i",{className:m?"bi bi-heart-fill":"bi bi-heart"})," ",f]}),Object(G.jsxs)(Ne,{variant:"light",size:"sm",onClick:function(){return s(!0)},style:{borderRight:"none",borderTopRightRadius:0},children:[Object(G.jsx)("i",{className:"bi bi-pencil"})," ",S("ActionMenu.Paint yours")]})]})]})}),Object(G.jsx)(we,{isOpen:r,closeModal:function(){return s(!1)},openCanvas:i}),Object(G.jsx)(ke,{isOpen:b,closeModal:function(){return j(!1)},openCanvas:i,imgInfo:t})]})},_e=i(196),De=i(549),He=i(1200),Be=i(1201),Ve=i(1204),Ge=i(547),ze=i(87),Ue=i(538),Fe=i.n(Ue),Je=i(539),We=Object(E.a)(pe.a)(Le||(Le=Object(k.a)(["\n  ","\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100vw;\n  height: 80px;\n  padding: 0px;\n  background-color: transparent;\n"])),(function(e){return!e.isOpen&&"display: none;"})),Ke=Object(E.a)(C.a)(Re||(Re=Object(k.a)(["\n  margin: 0px 3px;\n  padding: 0px;\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  border: 0.5px solid #fff;\n  background-color: rgba(0, 0, 0, 0.4);\n  color: #fff;\n  @media (max-width: 374px) {\n    margin: 0px 1px;\n    width: 35px;\n    height: 35px;\n  }\n"]))),Qe=Object(E.a)(C.a)(Pe||(Pe=Object(k.a)(["\n  padding: 3px 0px;\n  border: 0.5px solid #fff;\n  background-color: rgba(0, 0, 0, 0.4);\n  color: #fff;\n"]))),Xe=Object(E.a)(C.a)(Te||(Te=Object(k.a)(["\n  position: absolute;\n  bottom: 80px;\n  right: 5px;\n  padding: 0px;\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  border: 0.5px solid rgba(0, 0, 0, 0.4);\n  background-color: transparent;\n  color: rgba(0, 0, 0, 0.4);\n  font-size: 24px;\n"]))),Ye=Object(E.a)(C.a)(Ae||(Ae=Object(k.a)(["\n  position: absolute;\n  left: 0px;\n  bottom: 0px;\n  width: 100%;\n  height: 30px;\n  padding: 0px;\n  font-size: 36px;\n  line-height: 0px;\n  background: rgba(255, 255, 255, 0.3);\n  color: rgb(200, 200, 200);\n  border: none;\n"])));function qe(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function Ze(e,t){Je.fabric.Image.fromURL(e,(function(e){e.scaleToWidth(qe().width),t.add(e.set({left:0,top:0}))}),{crossOrigin:"Anonymous"})}var $e=function(e){var t=e.closeCanvas,i=e.basePrevIds,n=e.mode,c=e.imgInfos,a=e.imgInfo,o=Object(L.a)().t,r=ve(),s=Object(R.useRecoilValue)(B),l=Object(R.useRecoilValue)(A),d=Object(R.useRecoilValue)(I),b=Object(R.useRecoilValue)(_),j=Object(x.useState)(qe()),u=Object(y.a)(j,2),h=u[0],f=u[1],O=Object(x.useRef)(null),p=Object(x.useState)("#000"),g=Object(y.a)(p,2),m=g[0],v=g[1],w=Object(x.useState)(5),k=Object(y.a)(w,2),C=k[0],N=k[1],S=Object(x.useState)(ze.Tools.Pencil),E=Object(y.a)(S,2),M=E[0],P=E[1],T=Object(x.useState)(!1),D=Object(y.a)(T,2),H=D[0],V=D[1],z=Object(x.useState)(!1),U=Object(y.a)(z,2),F=U[0],J=U[1],W=Object(x.useState)(0),K=Object(y.a)(W,2),Q=K[0],X=K[1],Y=Object(x.useState)(!0),q=Object(y.a)(Y,2),Z=q[0],$=q[1];Object(x.useEffect)((function(){f(qe()),"new"!==n&&Ze(b,O.current._fc)}),[n,b]),Object(x.useEffect)((function(){window.addEventListener("deviceorientation",(function(e){var t=e.beta;X(Math.round(100*t)/100)}))}),[]);return Object(G.jsxs)("div",{style:{position:"absolute",zIndex:1e3,left:0,backgroundColor:"rgba(255, 255, 255, 0.5)",borderBottom:"5px solid #aaa"},children:[Object(G.jsx)(ze.SketchField,{name:"sketch",className:"canvas-area",ref:O,lineColor:m,lineWidth:C,fillColor:"transparent",width:h.width,height:h.height,forceValue:!0,onChange:function(){var e,t=H,i=null===(e=O.current)||void 0===e?void 0:e.canUndo();t!==i&&V(i)},tool:M,imageFormat:"jpeg"}),Z?Object(G.jsx)(Xe,{variant:"outline-light",onClick:function(){return $(!1)},children:Object(G.jsx)("i",{className:"bi bi-x"})}):Object(G.jsx)(Ye,{variant:"outline-light",onClick:function(){return $(!0)},children:Object(G.jsx)("i",{className:"bi bi-chevron-compact-up"})}),Object(G.jsxs)(We,{isOpen:Z,children:[Object(G.jsxs)(He.a,{style:{padding:"0px 15px",marginBottom:"10px"},children:[Object(G.jsxs)(Be.a,{xs:4,style:{padding:0},children:[Object(G.jsx)(Ke,{variant:M===ze.Tools.Pencil?"secondary":"light",onClick:function(){return P(ze.Tools.Pencil)},children:Object(G.jsx)("i",{className:"bi bi-pencil"})}),Object(G.jsx)(Ke,{variant:M===ze.Tools.Line?"secondary":"light",onClick:function(){return P(ze.Tools.Line)},children:Object(G.jsx)("i",{className:"bi bi-slash-lg"})}),Object(G.jsx)(Ve.a,{trigger:"click",placement:"top",overlay:function(e){return Object(G.jsx)(De.a,Object(re.a)(Object(re.a)({},e),{},{style:Object(re.a)(Object(re.a)({},e.style),{},{padding:"10px"}),children:Object(G.jsx)(Ge.a,{id:"lineColor",color:m,onChange:function(e){return v(e.hex)}})}))},style:{position:"relative"},children:Object(G.jsxs)(Ke,{variant:"light",style:{backgroundColor:"#fff"},children:[Object(G.jsx)("i",{className:"bi bi-palette",style:{color:m}})," "]})})]}),Object(G.jsx)(Be.a,{xs:4,style:{paddingRight:"5px",padding:0},children:Object(G.jsxs)("div",{children:[Object(G.jsx)("span",{style:{fontSize:"12px"},children:Object(G.jsx)("i",{className:"bi bi-border-width"})})," ",Object(G.jsx)("div",{style:{display:"inline-block",verticalAlign:"middle"},children:Object(G.jsx)(Fe.a,{min:1,max:15,value:C,style:{width:"80px"},onChange:function(e){return N(e.target.value)}})})]})}),Object(G.jsxs)(Be.a,{xs:4,style:{padding:0},children:[Object(G.jsx)(Ke,{variant:M===ze.Tools.Select?"secondary":"light",onClick:function(){return P(ze.Tools.Select)},children:Object(G.jsx)("i",{className:"bi bi-hand-index-thumb"})}),Object(G.jsx)(Ke,{disabled:M!==ze.Tools.Select,variant:"light",onClick:function(){try{O.current.removeSelected()}catch(e){alert(o("Canvas.Select before delete"))}},children:Object(G.jsx)("i",{className:"bi bi-trash"})}),Object(G.jsx)(Ke,{disabled:M!==ze.Tools.Select,variant:"light",onClick:function(){try{O.current.copy(),O.current.paste()}catch(e){alert(o("Canvas.Select before duplicate"))}},children:Object(G.jsx)("i",{className:"bi bi-files"})})]})]}),Object(G.jsxs)(te.a,{style:{width:"100%"},children:[Object(G.jsx)(Qe,{disabled:!H,variant:"light",onClick:function(){O.current.undo(),V(O.current.canUndo()),J(O.current.canRedo())},children:Object(G.jsx)("i",{className:"bi bi-arrow-90deg-left"})}),Object(G.jsx)(Qe,{disabled:!F,variant:"light",onClick:function(){O.current.redo(),V(O.current.canUndo()),J(O.current.canRedo())},children:Object(G.jsx)("i",{className:"bi bi-arrow-90deg-right"})}),Object(G.jsx)(Qe,{variant:"light",onClick:function(){window.confirm(o("Canvas.Clear confirm"))&&(O.current.clear(),V(O.current.canUndo()),J(O.current.canRedo()),"new"!==n&&Ze(b,O.current._fc))},children:Object(G.jsx)("i",{className:"bi bi-arrow-counterclockwise"})}),Object(G.jsxs)(Qe,{variant:"light",onClick:function(){var e,b,j,u;if(!s){if(!window.confirm(o("Canvas.Please fix tilt")))return;if(!(e=Q))return void alert(o("Canvas.Error"));alert(o("Canvas.Tilt retrieved"))}var f=Object(_e.b)(),p=Object(ye.b)();if(null!==(b=prompt(o("Canvas.Title label"),"edit"===n?a.title:""))&&null!==(j=prompt(o("Canvas.Details label"),"edit"===n?a.detail:""))){u="edit"===n?d:Date.now(),""===b&&(b=u);var x=O.current.toDataURL();Object(_e.d)(Object(_e.c)(f,"paintings/"+b),x,"data_url").then((function(e){return Object(_e.a)(e.ref)})).then((function(a){Promise.all([Object(ye.d)(Object(ye.c)(p,(s?"remote/":"")+"img_urls/"+l+"/"+u),a),Object(ye.d)(Object(ye.c)(p,(s?"remote/":"")+"img_info/"+l+"/"+u),{title:b,detail:j,angle:s?null:e,size:{width:h.width,height:h.height-120},creator_id:r.uid,prev_img_ids:"overwrite"===n&&Object(re.a)(Object(oe.a)({},d,!0),i)}),Object(ye.d)(Object(ye.c)(p,(s?"remote/":"")+"users/"+r.uid+"/img_ids/"+l+"/"+u),!0)]).then((function(e){var i=c.map((function(e){return e.creator_id}));Promise.all(i.map((function(e){return Object(ye.d)(Object(ye.c)(p,(s?"remote/":"")+"users/"+e+"/notifications/"+u),{type:0,loc:l,username:r.displayName})}))).then((function(e){Object(ye.d)(Object(ye.c)(p,(s?"remote/":"")+"users/"+r.uid+"/name"),r.displayName).then((function(e){alert(o("Canvas.Uploaded")),t(),window.location.href="/"+l+"?pid="+u})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))}},children:[Object(G.jsx)("i",{className:"bi bi-check-lg"})," ",o("Canvas.Done")]}),Object(G.jsxs)(Qe,{variant:"light",onClick:function(){window.confirm(o("Canvas.Confirm close canvas"))&&t()},children:[Object(G.jsx)("i",{className:"bi bi-x-lg"})," ",o("Canvas.Cancel")]})]})]})]})},et=i(109),tt=i.n(et);var it=function(e){var t,i=e.loc,n=e.location,c=Object(L.a)().t,a=Object(R.useRecoilValue)(B),o=Object(R.useRecoilState)(A),r=Object(y.a)(o,2),s=r[0],l=r[1],d=Object(R.useRecoilState)(I),b=Object(y.a)(d,2),j=b[0],u=b[1],h=Object(R.useRecoilState)(_),f=Object(y.a)(h,2),O=f[0],p=f[1],g=Object(x.useState)(0),m=Object(y.a)(g,2),v=m[0],w=m[1],k=Object(R.useSetRecoilState)(D),N=Object(R.useSetRecoilState)(H),S=Object(x.useState)(!1),E=Object(y.a)(S,2),M=E[0],P=E[1],T=Object(x.useState)([]),V=Object(y.a)(T,2),z=V[0],U=V[1],F=Object(x.useState)("new"),J=Object(y.a)(F,2),W=J[0],K=J[1],Q=Object(x.useState)(O),X=Object(y.a)(Q,2),Y=X[0],q=X[1],Z=ve(),$=function(e){var t=e;Array.isArray(e)||(t=Object.keys(e).map((function(t){return Object(re.a)({id:t},e[t])})));var i=tt.a.parse(n.search).pid;U(t),u(i||t[0].id);var c=i?t.map((function(e){return e.id})).indexOf(i):0;w(c),ee(i||t[0].id),k(t[c].angle),N(t[c].size)},ee=function(e){var t=Object(ye.b)();Object(ye.a)(Object(ye.c)(t,(a?"remote/":"")+"img_urls/"+i+"/"+e)).then((function(e){e.exists()&&p(e.val())})).catch((function(e){return console.error(e)}))},te=function(e){var t=z;1===e?t[v].likes=Object(re.a)(Object(re.a)({},t[v].likes),{},Object(oe.a)({},Z.uid,!0)):delete t[v].likes[Z.uid],U(t)},ie=function(){q(O),p("")};return Object(x.useEffect)((function(){l(i);var e=tt.a.parse(n.search),t=Object(ye.b)();Object(ye.a)(Object(ye.c)(t,(a?"remote/":"")+"img_info/"+i)).then((function(n){if(n.exists())if(e.mode&&"base"===e.mode){var c=Object.keys(n.val()[e.bid].prev_img_ids),o={};c.forEach((function(e){o[e]=n.val()[e]})),$(o)}else e.mode&&"user"===e.mode?Object(ye.a)(Object(ye.c)(t,(a?"remote/":"")+"users/"+e.uid+"/img_ids/"+i)).then((function(e){var t={};e.val()&&(Object.keys(e.val()).forEach((function(e){t[e]=n.val()[e]})),$(t))})):$(n.val())})).catch((function(e){return console.error(e)}))}),[]),Object(G.jsxs)("div",{children:[Object(G.jsx)(Oe,{switchPrev:function(){if(z.length>1){var e=0===v?z.length-1:v-1;w(e),u(z[e].id),ee(z[e].id),k(z[e].angle),N(z[e].size);var t=tt.a.parse(n.search);t.pid=z[e].id;var i=window.location.origin+window.location.pathname+"?"+tt.a.stringify(t);window.history.replaceState({path:i},"",i)}},switchNext:function(){if(z.length>1){var e=v===z.length-1?0:v+1;w(e),u(z[e].id),ee(z[e].id),k(z[e].angle),N(z[e].size);var t=tt.a.parse(n.search);t.pid=z[e].id;var i=window.location.origin+window.location.pathname+"?"+tt.a.stringify(t);window.history.replaceState({path:i},"",i)}}}),M&&Object(G.jsx)($e,{mode:W,basePrevIds:(null===(t=z[v])||void 0===t?void 0:t.prev_img_ids)||{},closeCanvas:function(){P(!1),p(Y)},imgInfos:z,imgInfo:z[v]}),!M&&(z.length>0?Object(G.jsx)(Ie,{imgInfo:z[v],openCanvas:function(e){var t=e.mode;P(!0),K(t),ie()},likeTrigger:function(){var e=Object(ye.b)();z[v].likes&&z[v].likes[Z.uid]?Object(ye.d)(Object(ye.c)(e,(a?"remote/":"")+"img_info/"+i+"/"+j+"/likes/"+Z.uid),null).then((function(e){return te(-1)})).catch((function(e){return alert(e)})):Object(ye.d)(Object(ye.c)(e,(a?"remote/":"")+"img_info/"+i+"/"+j+"/likes/"+Z.uid),!0).then((function(t){te(1),Object(ye.d)(Object(ye.c)(e,(a?"remote/":"")+"users/"+z[v].creator_id+"/notifications/"+j),{type:1,loc:s,username:z[v].likes&&Object.keys(z[v].likes).length>1?Z.displayName+"\u3068\u4ed6\u306e"+(Object.keys(z[v].likes).length-1)+"\u4eba":Z.displayName})})).catch((function(e){return alert(e)}))}}):Object(G.jsx)(C.a,{style:{position:"absolute",bottom:0,left:0,width:"100vw"},onClick:function(){P(!0),K("new"),ie()},children:c("Graffitis.Paint first graffiti")}))]})},nt=i(1203),ct=i(1207),at=i(1202),ot=["Painted based on yours","Liked your graffiti"];var rt=function(){var e=ve(),t=Object(R.useRecoilValue)(B),i=Object(R.useRecoilValue)(A),n=Object(x.useState)("Campus as Canvas"),c=Object(y.a)(n,2),a=c[0],o=c[1],r=Object(x.useState)({}),s=Object(y.a)(r,2),l=s[0],d=s[1],b=Object(L.a)(),j=b.t,u=b.i18n;return Object(x.useEffect)((function(){var n=Object(ye.b)(),c=tt.a.parse(window.location.search);c.mode&&"base"===c.mode?Object(ye.a)(Object(ye.c)(n,(t?"remote/":"")+"img_info/"+i+"/"+c.bid+"/title")).then((function(e){o("\u300c"+e.val()+"\u300d\u306e\u30d9\u30fc\u30b9\u4f5c\u54c1")})):c.mode&&"user"===c.mode?Object(ye.a)(Object(ye.c)(n,(t?"remote/":"")+"users/"+c.uid+"/name")).then((function(e){o(e.val()+"\u306e\u4f5c\u54c1")})):i&&o(M[i].name),e&&Object(ye.a)(Object(ye.c)(n,(t?"remote/":"")+"users/"+e.uid+"/notifications")).then((function(e){d(e.val())}))}),[i]),Object(G.jsx)(nt.a,{style:{position:"absolute",left:0,top:0,width:"100vw",background:"rgba(0, 0, 0, 0.3)"},children:Object(G.jsxs)(pe.a,{children:[i&&Object(G.jsx)(nt.a.Collapse,{children:Object(G.jsxs)(ct.a,{className:"me-auto",children:[Object(G.jsx)(C.a,{style:{color:"#fff",borderColor:"#fff"},className:"btn btn-sm",variant:"outline-secondary",onClick:function(){return window.location.href="/"},children:Object(G.jsx)("i",{className:"bi bi-house"})}),Object(G.jsx)("span",{style:{width:"10px"}}),Object(G.jsx)(C.a,{style:{color:"#fff",borderColor:"#fff"},className:"btn btn-sm",variant:"outline-secondary",onClick:function(){return window.history.back()},children:Object(G.jsx)("i",{className:"bi bi-chevron-compact-left"})})]})}),Object(G.jsx)(nt.a.Brand,{style:{color:"#fff",margin:"0px 5px"},children:a}),Object(G.jsxs)(nt.a.Collapse,{children:[Object(G.jsx)(ct.a,{className:"me-auto"}),Object(G.jsxs)(ct.a,{children:[Object(G.jsxs)(at.a,{title:Object(G.jsx)("span",{style:{color:"#fff"},children:Object(G.jsx)("i",{className:"bi bi-translate"})}),drop:"start",children:[Object(G.jsx)(at.a.Item,{onClick:function(){return u.changeLanguage("ja")},children:"\u65e5\u672c\u8a9e"}),Object(G.jsx)(at.a.Item,{onClick:function(){return u.changeLanguage("en")},children:"English"})]}),Object(G.jsxs)(at.a,{title:Object(G.jsx)("span",{style:{color:"#fff"},children:Object(G.jsx)("i",{className:"bi bi-person-circle"})}),drop:"start",children:[Object(G.jsx)("p",{style:{textAlign:"center",marginBottom:"5px"},children:null===e||void 0===e?void 0:e.displayName}),e?Object(G.jsxs)(at.a.Item,{style:{borderTop:"1px solid #ccc"},onClick:function(){(function(){var e=Object(ge.b)();return Object(ge.e)(e)})().catch((function(e){return console.error(e)}))},children:[Object(G.jsx)("i",{className:"bi bi-box-arrow-right"})," ",j("Header.User.Sign out")]}):Object(G.jsxs)(at.a.Item,{style:{borderTop:"1px solid #ccc"},onClick:function(){me().catch((function(e){return console.error(e)}))},children:[Object(G.jsx)("i",{className:"bi bi-box-arrow-in-right"})," ",j("Header.User.Sign in")]}),i&&Object(G.jsxs)(at.a.Item,{style:{borderTop:"1px solid #ccc"},onClick:function(){window.location.href=window.location.origin+window.location.pathname+"?mode=user&uid="+e.uid},children:[Object(G.jsx)("i",{className:"bi bi-images"})," ",j("Header.User.Check my graffiti")]})]}),Object(G.jsxs)(at.a,{title:Object(G.jsxs)("span",{style:{color:l&&Object.keys(l).length?"yellow":"#fff",fontWeight:l&&Object.keys(l).length?"bold":"normal"},children:[Object(G.jsx)("i",{className:"bi bi-bell"}),l&&Object.keys(l).length]}),drop:"start",children:[Object(G.jsxs)("div",{style:{padding:"0px 10px"},children:[Object(G.jsx)("i",{className:"bi bi-bell"}),Object(G.jsx)(C.a,{variant:"outline-secondary",size:"sm",style:{padding:"0px 5px",margin:"0px 0px 5px 10px",border:"1px solid #ccc",color:"#aaa",float:"right"},onClick:function(){Object(ye.d)(Object(ye.c)(Object(ye.b)(),(t?"remote/":"")+"users/"+e.uid+"/notifications/"),null),d({})},children:j("Header.Notifications.Clear")})]}),l&&Object.keys(l).map((function(n){var c,a,o,r,s,d,b,h;return Object(G.jsx)(at.a.Item,{style:{width:"300px",padding:0,borderTop:"1px solid #ccc"},disabled:!i||i!==l[n].loc,onClick:function(){return function(i,n){Object(ye.d)(Object(ye.c)(Object(ye.b)(),(t?"remote/":"")+"users/"+e.uid+"/notifications/"+n),null).then((function(e){return window.location.href=window.location.origin+"/"+i+"?pid="+n})).catch((function(e){return alert(e)}))}(i,n)},children:Object(G.jsxs)(He.a,{style:{width:"100%",margin:0,padding:"5px 0px"},children:[Object(G.jsx)(Be.a,{xs:1,children:Object(G.jsxs)("div",{style:{display:"flex"},children:[0===l[n].type&&Object(G.jsx)("i",{style:{color:"orange"},className:"bi bi-brush"}),1===l[n].type&&Object(G.jsx)("i",{style:{color:"red",paddingTop:"12px"},className:"bi bi-heart"})]})}),Object(G.jsxs)(Be.a,{xs:11,children:[Object(G.jsxs)("small",{style:{margin:0,whiteSpace:"normal"},children:[" ",l[n].username&&("ja"===u.language?l[n].username:null===(c=l[n].username)||void 0===c||null===(a=c.replace("\u3068\u4ed6\u306e"," and other "))||void 0===a||null===(o=a.split(""))||void 0===o||null===(r=o.reverse())||void 0===r||null===(s=r.join(""))||void 0===s||null===(d=s.replace("\u4eba","sresu "))||void 0===d||null===(b=d.split(""))||void 0===b||null===(h=b.reverse())||void 0===h?void 0:h.join(""))+j("Header.Notifications."+ot[l[n].type])]}),Object(G.jsx)("br",{}),Object(G.jsx)("small",{style:{color:"#aaa"},children:i&&i===l[n].loc?j("Header.Notifications.Click to check"):j("Header.Notifications.Check in AR")})]})]})},n)}))]})]})]})]})})},st=function(e){var t=e.children;return function(){var e=Object(x.useState)(!0),t=Object(y.a)(e,2),i=t[0],n=t[1],c=Object(R.useSetRecoilState)(V);return Object(x.useEffect)((function(){var e=Object(ge.b)();return Object(ge.c)(e,(function(e){c(e),n(!1)}))}),[c]),i}()?Object(G.jsx)("p",{children:"Loading..."}):t};var lt=function(){var e=Object(L.a)().t,t=ve();return Object(x.useEffect)((function(){window.addEventListener("popstate",(function(e){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){console.log("Camera on")})).catch((function(e){console.error(e)}))}))})),Object(G.jsx)("div",{className:"App",children:Object(G.jsx)(st,{children:Object(G.jsx)("div",{children:t?Object(G.jsxs)("div",{children:[Object(G.jsx)(rt,{}),Object(G.jsxs)(w.b,{children:[Object(G.jsx)(ae,{path:"/"}),Object(G.jsx)(it,{path:"/:loc"})]})]}):Object(G.jsxs)("div",{children:[Object(G.jsx)(rt,{}),Object(G.jsx)(C.a,{style:{marginTop:"45vh"},onClick:function(){me().catch((function(e){return console.error(e)}))},children:e("App.Sign in with Google")})]})})})})},dt=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,1208)).then((function(t){var i=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;i(e),n(e),c(e),a(e),o(e)}))},bt=i(541);function jt(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var ut=function(){var e=Object(R.useRecoilValue)(B),t=Object(R.useRecoilValue)(A),i=Object(R.useRecoilValue)(_),n=Object(R.useRecoilValue)(I),c=Object(R.useRecoilValue)(D),a=Object(R.useRecoilValue)(H),o=Object(x.useState)(jt()),r=Object(y.a)(o,2),s=r[0],l=r[1],d=Object(x.useState)({}),b=Object(y.a)(d,2),j=b[0],u=b[1],h=Object(x.useState)("0.3 1.5 -10"),f=Object(y.a)(h,2),O=f[0],p=f[1],g=Object(x.useState)("0 0 0"),m=Object(y.a)(g,2),v=m[0],w=m[1];return Object(x.useEffect)((function(){l(jt());var i=Object(ye.b)();Object(ye.a)(Object(ye.c)(i,(e?"remote/":"")+"img_urls/"+t)).then((function(e){e.exists()&&u(e.val())})).catch((function(e){return console.error(e)})),p("-0.3 ".concat(1.5-Math.round(50*Math.cos(c*Math.PI/180)*100)/100," ").concat(-1*Math.round(50*Math.sin(c*Math.PI/180)*100)/100)),w("".concat(c-90," 0 0"))}),[t]),Object(x.useEffect)((function(){p("-0.3 ".concat(1.5-Math.round(50*Math.cos(c*Math.PI/180)*100)/100," ").concat(-1*Math.round(50*Math.sin(c*Math.PI/180)*100)/100)),w("".concat(c-90," 0 0"))}),[c]),Object(G.jsxs)("a-scene",{id:"a-scene","vr-mode-ui":"enabled: false;",renderer:"logarithmicDepthBuffer: true;",arjs:"trackingMethod: best; sourceType: webcam;debugUIEnabled: false;",children:[Object(G.jsx)("a-assets",{children:j&&Object.keys(j).map((function(e){return Object(G.jsx)("img",{id:e,src:j[e],crossOrigin:"anonymous",alt:"graffiti "+e},e)}))}),i&&Object(G.jsx)("a-image",{src:"#"+n,width:a?s.width/(8*s.width/414):52,height:a?a.height*s.width/a.width/(12.5*s.height/617):40,position:O,rotation:v})]})};function ht(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var ft=function(){var e=Object(R.useRecoilValue)(B),t=Object(R.useRecoilValue)(A),i=Object(R.useRecoilValue)(_),n=Object(R.useRecoilValue)(I),c=Object(R.useRecoilValue)(D),a=(Object(R.useRecoilValue)(H),Object(x.useState)(ht())),o=Object(y.a)(a,2),r=o[0],s=o[1],l=Object(x.useState)({}),d=Object(y.a)(l,2),b=(d[0],d[1]),j=Object(x.useState)("0.3 1.5 -10"),u=Object(y.a)(j,2),h=(u[0],u[1]),f=Object(x.useState)("0 0 0"),O=Object(y.a)(f,2),p=(O[0],O[1]);return Object(x.useEffect)((function(){s(ht());var i=Object(ye.b)();Object(ye.a)(Object(ye.c)(i,(e?"remote/":"")+"img_urls/"+t)).then((function(e){e.exists()&&b(e.val())})).catch((function(e){return console.error(e)})),h("-0.3 ".concat(1.5-Math.round(50*Math.cos(c*Math.PI/180)*100)/100," ").concat(-1*Math.round(50*Math.sin(c*Math.PI/180)*100)/100)),p("".concat(c-90," 0 0"))}),[t]),Object(x.useEffect)((function(){h("-0.3 ".concat(1.5-Math.round(50*Math.cos(c*Math.PI/180)*100)/100," ").concat(-1*Math.round(50*Math.sin(c*Math.PI/180)*100)/100)),p("".concat(c-90," 0 0"))}),[c]),Object(G.jsxs)("div",{children:[Object(G.jsx)("img",{src:"/img/loc/".concat(t,".jpeg"),alt:"Background",width:r.width,height:r.height,style:{position:"absolute",top:0,left:0,zIndex:-1}}),i&&Object(G.jsx)("img",{src:i,width:r.width,height:r.height,alt:"Graffiti #"+n})]})},Ot=(i(1189),i(548)),pt=i(192),xt=i(543),gt=i.n(xt),mt=i(544),vt=i(545),wt=i(546);Object(bt.a)({apiKey:"AIzaSyAA4zXM0wRBrL1l65NHg_8mQcjg75ew9RQ",authDomain:"campus-coloring.firebaseapp.com",databaseURL:"https://campus-coloring.firebaseio.com",projectId:"campus-coloring",storageBucket:"campus-coloring.appspot.com",messagingSenderId:"45926036058",appId:"1:45926036058:web:a9271137ac86762843de63",measurementId:"G-WPPW3TX4QG"}),Ot.a.use(mt.a).use(pt.e).use(gt.a).init({resources:{en:{translation:vt},ja:{translation:wt}},fallbackLng:"ja",interpolation:{escapeValue:!1}});var yt=function(){var e=Object(R.useRecoilValue)(A),t=Object(R.useRecoilValue)(B),i=ve();return Object(G.jsxs)("div",{style:{width:"100%",height:"100%"},children:[i&&e&&(t?Object(G.jsx)(ft,{}):Object(G.jsx)(ut,{})),Object(G.jsx)(lt,{})]})};v.a.render(Object(G.jsx)(R.RecoilRoot,{children:Object(G.jsx)(yt,{})}),document.getElementById("root")),dt()},545:function(e){e.exports=JSON.parse('{"App":{"Sign in with Google":"Sign in with Google"},"ActionMenu":{"Edit/Delete":"Edit/Delete","User":"User","Based works":"Based works","Paint yours":"New!"},"Canvas":{"Clear confirm":"Are you sure to clear your current progress?","Select before duplicate":"Please select a part of your graffiti before duplicating it","Select before delete":"Please select a part of your graffiti before deleting it","Please fix tilt":"Please fix the tilt of your smartphone to display your graffiti the best, and then click OK!","Tilt retrieved":"Tilt retrieved! Now you can move on with any posture.","Error":"Error occured! Please press \'Done\' again.","Title label":"Title: ","Details label":"Details about this graffiti: ","Uploaded":"Uploaded successfully!","Confirm close canvas":"Are you sure to leave the canvas? Your current progress will be abandoned.","Done":"Done","Cancel":"Cancel"},"EditGraffitiModal":{"Title label":"Title: ","Details label":"Details: ","Updated":"Updated successfully!","Deleted":"Deleted successfully!","Edit/Delete":"Edit/Delete","Edit graffiti":"Edit graffiti","Edit title and details":"Edit title and details only","Delete":"Delete"},"Graffitis":{"Paint first graffiti":"Paint the first graffiti for this place!"},"Header":{"User":{"Sign in":"Sign in","Sign out":"Sign out","Check my graffiti":"Check my graffiti"},"Notifications":{"Painted based on yours":" painted a new one based on yours!","Liked your graffiti":" liked your graffiti!","Click to check":"Click to check it out","Check in AR":"Move to this place and enter AR mode","Clear":"Clear"}},"Home":{"51":"Bldg. 51","55":"Bldg. 55","Explanation":"Explanation","Explanation 1":"Touch the pin and the landscape there will be displayed.","Explanation 2":"Move near the pinned place, and the pin will turn yellow. Then click it to see graffiti there.","Explanation 3":"GPS data is retrieved every 5 seconds.","Explanation 4":"Click \'Check out the graffiti!\' button to see the graffiti based on the landscape.","Locations list":"Locations list","Location":"Location","Viewpoint":"Viewpoint","Rain":"Rain","55 viewpoint":"From the corridor outside, facing the courtyard","54-55":"Bldg. 54-55","54-55 viewpoint":"From the front of Bldg. 55\'s entrance, facing skywalks between Bldg. 54 & 55","51 viewpoint":"From the front of south entrance (1F), facing the basement on the West side","51-60":"Bldg. 51-60","51-60 viewpoint":"From the south skywalk (2F)","60-61":"Bldg. 60-61","60-61 viewpoint":"From the south passageway (1F)"},"LocationsMenu":{"Choose location":"Choose location","Retrieving location":"Retrieving your location...","Failed to retrieve":"Failed to retrieve your location. Please change the permission for retrieving GPS data, or move to somewhere outdoor and stay for seconds.","Point camera":"Point your camera to the scene shown in the picture above.","View graffiti":"Check out the graffiti!","Move here and wait":"Move to this place and you will be able to see the graffiti in seconds.","Please reload":"If nothing changes after moving, please reload the page."},"NewGraffitiModal":{"Which graffiti":"Which kind of graffiti?","New graffiti":"New graffiti","Graffiti based on this one":"Graffiti based on this one"}}')},546:function(e){e.exports=JSON.parse('{"App":{"Sign in with Google":"Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3"},"ActionMenu":{"Edit/Delete":"\u7de8\u96c6\u30fb\u524a\u9664","User":"\u30e6\u30fc\u30b6","Based works":"\u524d\u4f5c\u3078","Paint yours":"\u65b0\u898f\u4f5c\u6210"},"Canvas":{"Clear confirm":"\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u307e\u3059\u304b\uff1f","Select before duplicate":"\u307e\u305a\u30b3\u30d4\u30da\u3057\u305f\u3044\u30d1\u30fc\u30c4\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044","Select before delete":"\u307e\u305a\u524a\u9664\u3057\u305f\u3044\u30d1\u30fc\u30c4\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044","Please fix tilt":"\u4f5c\u54c1\u3092\u6700\u3082\u9069\u5207\u306b\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u3001\u30b9\u30de\u30db\u306e\u524d\u5f8c\u50be\u304d\u3092\u56fa\u5b9a\u3057\u3066\u304b\u3089OK\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\uff01","Tilt retrieved":"\u50be\u304d\u3092\u53d6\u5f97\u3057\u307e\u3057\u305f\u3002\u4eca\u304b\u3089\u30bf\u30a4\u30d4\u30f3\u30b0\u306b\u9069\u3057\u305f\u59ff\u52e2\u306b\u5909\u3048\u3066\u3044\u305f\u3060\u3044\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002","Error":"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u300c\u3067\u304d\u305f\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002","Title label":"\u30bf\u30a4\u30c8\u30eb\uff1a","Details label":"\u3053\u306e\u4f5c\u54c1\u306b\u3064\u3044\u3066\u306e\u8aac\u660e\uff1a","Uploaded":"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3057\u305f\uff01","Confirm close canvas":"\u4f5c\u6210\u4e2d\u306e\u843d\u66f8\u304d\u3092\u3084\u3081\u307e\u3059\u304b\uff1f","Done":"\u3067\u304d\u305f","Cancel":"\u3084\u3081\u308b"},"EditGraffitiModal":{"Title label":"\u30bf\u30a4\u30c8\u30eb\uff1a","Details label":"\u8aac\u660e\uff1a","Updated":"\u66f4\u65b0\u3057\u307e\u3057\u305f\uff01","Deleted":"\u524a\u9664\u3057\u307e\u3057\u305f\uff01","Edit/Delete":"\u7de8\u96c6\u30fb\u524a\u9664","Edit graffiti":"\u843d\u66f8\u304d\u3092\u7de8\u96c6","Edit title and details":"\u30bf\u30a4\u30c8\u30eb\u3068\u8aac\u660e\u306e\u307f\u3092\u7de8\u96c6","Delete":"\u524a\u9664"},"Graffitis":{"Paint first graffiti":"\u3053\u306e\u5834\u6240\u3067\u521d\u306e\u4f5c\u54c1\u3092\u63cf\u3053\u3046\uff01"},"Header":{"User":{"Sign in":"\u30ed\u30b0\u30a4\u30f3","Sign out":"\u30ed\u30b0\u30a2\u30a6\u30c8","Check my graffiti":"\u81ea\u5206\u306e\u843d\u66f8\u304d\u3092\u898b\u308b"},"Notifications":{"Painted based on yours":"\u304c\u3042\u306a\u305f\u306e\u4f5c\u54c1\u306b\u57fa\u3065\u3044\u3066\u63cf\u304d\u307e\u3057\u305f\uff01","Liked your graffiti":"\u304c\u3042\u306a\u305f\u306e\u4f5c\u54c1\u306b\u300c\u3044\u3044\u306d\u300d\uff01","Click to check":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u898b\u306b\u3044\u304f","Check in AR":"\u3053\u306e\u5834\u6240\u306eAR\u30e2\u30fc\u30c9\u306b\u5165\u3063\u305f\u3089\u898b\u308c\u308b\u3088","Clear":"\u30af\u30ea\u30a2"}},"Home":{"51":"51\u53f7\u9928\u5916","55":"55\u53f7\u9928\u5916","Explanation":"\u8aac\u660e","Explanation 1":"\u30d4\u30f3\u3092\u30bf\u30c3\u30c1\u3059\u308b\u3068\u3001\u305d\u3053\u306e\u666f\u8272\u304c\u6620\u3063\u305f\u753b\u50cf\u304c\u8868\u793a\u3055\u308c\u307e\u3059","Explanation 2":"\u30d4\u30f3\u3055\u308c\u305f\u5834\u6240\u306e\u8fd1\u304f\u306b\u79fb\u52d5\u3059\u308b\u3068\u3001\u30d4\u30f3\u304c\u9ec4\u8272\u306b\u306a\u308a\u3001\u30bf\u30c3\u30c1\u3059\u308b\u3068\u843d\u66f8\u304d\u304c\u898b\u3048\u307e\u3059","Explanation 3":"5\u79d2\u3054\u3068\u306b\u4f4d\u7f6e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3059","Explanation 4":"\u300c\u843d\u66f8\u304d\u3092\u898b\u308b\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u305d\u3053\u306e\u666f\u8272\u306b\u57fa\u3065\u3044\u305f\u843d\u66f8\u304d\u304c\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059","Locations list":"\u5834\u6240\u4e00\u89a7","Location":"\u5834\u6240","Viewpoint":"\u8996\u70b9","Rain":"\u96e8","55 viewpoint":"\u5916\u306e\u5eca\u4e0b\u304b\u3089\u3001\u4e2d\u5ead\u5411\u304d","54-55":"54\u300155\u53f7\u9928\u306e\u9593","54-55 viewpoint":"55\u53f7\u9928\u306e\u5165\u53e3\u524d\u304b\u3089\u300154-55\u53f7\u9928\u9023\u7d61\u901a\u8def\u5411\u304d","51 viewpoint":"\u4e00\u968e\u306e\u5357\u5074\u5165\u53e3\u306e\u524d\u304b\u3089\u3001\u897f\u5074\u306e\u5730\u4e0b\u306b\u5411\u3051\u308b","51-60":"51\u300160\u53f7\u9928\u306e\u9593","51-60 viewpoint":"\u5357\u5074\u306e\u7a7a\u4e2d\u901a\u8def\u304b\u3089","60-61":"60\u300161\u53f7\u9928\u306e\u9593","60-61 viewpoint":"\u5357\u5074\u306e\u5730\u9762\u901a\u8def\u304b\u3089"},"LocationsMenu":{"Choose location":"\u5834\u6240\u3092\u9078\u629e","Retrieving location":"\u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u4e2d...","Failed to retrieve":"\u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u5931\u6557\u3002\u4f4d\u7f6e\u60c5\u5831\u306e\u53d6\u5f97\u3092\u8a31\u53ef\u3057\u3001\u906e\u853d\u7269\u306e\u306a\u3044\u7a7a\u9593\u306b\u79fb\u52d5\u3057\u3066\u6570\u79d2\u5f85\u3063\u3066\u304f\u3060\u3055\u3044\u3002","Point camera":"\u2191\u306e\u666f\u8272\u306b\u30ab\u30e1\u30e9\u3092\u5411\u3051\u3066\u304f\u3060\u3055\u3044","View graffiti":"\u843d\u66f8\u304d\u3092\u89b3\u308b","Move here and wait":"\u3053\u306e\u5834\u6240\u306b\u79fb\u52d5\u3057\u3001\u6570\u79d2\u5f85\u3064\u3068\u843d\u66f8\u304d\u304c\u898b\u3048\u308b\u3088","Please reload":"\u79fb\u52d5\u3057\u3066\u3082\u30c0\u30e1\u3067\u3057\u305f\u3089\u3001\u753b\u9762\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044"},"NewGraffitiModal":{"Which graffiti":"\u3069\u3093\u306a\u843d\u66f8\u304d\u3092\u63cf\u304d\u305f\u3044\uff1f","New graffiti":"\u65b0\u3057\u304f\u63cf\u3053\u3046","Graffiti based on this one":"\u3053\u308c\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u63cf\u3053\u3046"}}')},555:function(e,t,i){},560:function(e,t,i){},701:function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=701},728:function(e,t){},730:function(e,t){},753:function(e,t){},754:function(e,t){},760:function(e,t){},762:function(e,t){},794:function(e,t){},796:function(e,t){},797:function(e,t){},802:function(e,t){},804:function(e,t){},810:function(e,t){},812:function(e,t){},831:function(e,t){},843:function(e,t){},846:function(e,t){},868:function(e,t){}},[[1192,1,2]]]);
//# sourceMappingURL=main.92ec3321.chunk.js.map