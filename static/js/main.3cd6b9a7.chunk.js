(this["webpackJsonpcampus-coloring"]=this["webpackJsonpcampus-coloring"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(28),i=n(29),o=n(35),s=n(34),c=n(1),u=n.n(c),h=n(38),l=n.n(h),d=(n(111),n(23)),p=(n(112),n(113),n(137)),m=n(24),j=n(59),g=n(139),f=n(55),b=void 0;function O(){var e=Object(d.a)(["\n  position: absolute;\n  left: 0;\n  top: 45%;\n  width: 100%;\n  height: 5%;\n"]);return O=function(){return e},e}Object(m.a)(g.a)(O());var v=function(e){e.switchToPrev,e.switchToNext;g.a.Column,p.a,b.switchToPrev,f.a,g.a.Column,g.a.Column,p.a,b.switchToNext,f.a},I=n(140),x=n(97);function w(){var e=Object(d.a)(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 15%;\n"]);return w=function(){return e},e}var y=Object(m.a)(g.a)(w()),k=function(e){var t=e.image,n=e.openCanvas;return Object(a.jsxs)(y,{children:[Object(a.jsx)(g.a.Column,{width:8,children:Object(a.jsxs)(I.a,{children:[Object(a.jsx)("h4",{children:t.name}),Object(a.jsx)("p",{children:t.description})]})}),Object(a.jsx)(g.a.Column,{width:2,children:Object(a.jsxs)(p.a,{as:"div",labelPosition:"right",children:[Object(a.jsx)(p.a,{color:"red",children:Object(a.jsx)(f.a,{name:"heart"})}),Object(a.jsx)(x.a,{as:"a",basic:!0,color:"red",pointing:"left",children:"1"})]})}),Object(a.jsx)(g.a.Column,{width:3,children:Object(a.jsx)(p.a,{color:"orange",onClick:n,disabled:!0,children:"Add your painting on this one"})}),Object(a.jsx)(g.a.Column,{width:3,children:Object(a.jsx)(p.a,{color:"green",onClick:n,children:"Create your new painting"})})]})};function C(){var e=Object(d.a)(["\n  background: #fff;\n  width: 100%;\n  height: 80%;\n"]);return C=function(){return e},e}function S(){var e=Object(d.a)(["\n  width: 100%;\n  text-align: center;\n"]);return S=function(){return e},e}function A(){var e=Object(d.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n"]);return A=function(){return e},e}function T(){var e=Object(d.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]);return T=function(){return e},e}var M=Object(m.a)("div")(T()),N=Object(m.a)("div")(A()),E=Object(m.a)("div")(S()),L=Object(m.a)("canvas")(C()),P=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={isCanvasOpen:!1,currentImg:e.props.imagesInfo&&e.props.imagesInfo.length&&e.props.imagesInfo[0]},e.signIn=function(){try{e.props.auth.signInWithRedirect(new j.a.auth.GoogleAuthProvider)}catch(t){alert(t)}},e.signOut=function(){try{e.props.auth.signOut()}catch(t){alert(t)}},e.switchToPrevImage=function(){var t=e.props.imagesInfo,n=e.state.currentImg;e.setState({currentImg:0===t.indexOf(n)?t[t.length-1]:t[t.indexOf(n)-1]})},e.switchToNextImage=function(){var t=e.props.imagesInfo,n=e.state.currentImg;e.setState({currentImg:t.indexOf(n)+1===t.length?t[0]:t[t.indexOf(n)+1]})},e}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.imagesInfo&&e.imagesInfo!==this.props.imagesInfo&&(this.props.imagesInfo.length>0?this.setState({currentImg:this.props.imagesInfo[0]}):this.setState({currentImg:null}))}},{key:"render",value:function(){var e=this,t=this.props.user,n=this.state,r=n.isCanvasOpen,i=n.currentImg;return Object(a.jsx)(M,{children:Object(a.jsxs)(N,{children:[Object(a.jsxs)(E,{children:[t&&"loading"!==t&&Object(a.jsxs)("span",{children:[t.displayName,", welcome! "]}),t?"loading"===t?Object(a.jsx)("h2",{children:"Loading..."}):Object(a.jsx)(p.a,{onClick:this.signOut,children:"Sign out"}):Object(a.jsx)(p.a,{onClick:this.signIn,children:"Sign in"})]}),r&&Object(a.jsx)(L,{children:"\u3086\u3073\u3086\u3073\uff01"}),i&&Object(a.jsx)(v,{switchToPrev:this.switchToPrevImage,switchToNext:this.switchToNextImage}),Object(a.jsx)(k,{image:{name:"",description:""},openCanvas:function(){return e.setState({isCanvasOpen:!0})}}),i&&Object(a.jsx)(k,{image:i,openCanvas:function(){return e.setState({isCanvasOpen:!0})}})]})})}}]),n}(u.a.Component),R=n(81),B=n.n(R),U=n(82),D=n(96),F=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).entityRef=u.a.createRef(),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(a.jsx)("a-nft",{markerhandler:!0,type:"nft",url:"https://yhhaoareyou.github.io/campus-coloring/descriptors/"+this.props.location,smooth:"true",smoothCount:"10",smoothTolerance:".01",smoothThreshold:"5",id:"a-nft","data-location":this.props.location,children:this.props.images.map((function(e){return Object(a.jsx)("a-image",{src:"#"+e.id,width:"500",height:"500",position:"150 0 0",rotation:"-90 0 0"},e.id)}))})}}]),n}(u.a.Component),W=n.p+"static/media/hiro-marker.81a8bff1.png",z=(n(120),n(125),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={locationNames:[],currentLocation:"",currentImages:[],imageUrlsById:{}},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(B.a.mark((function e(){var t,n,a,r,i,o,s=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.db,e.next=3,t.ref().once("value");case 3:n=e.sent,a=n.val().image_urls,r=n.val().locations,this.setState({imageUrlsById:a,locationNames:Object.keys(r)}),i=function(e){s.setState({currentImages:e}),s.props.setImagesInfo(e)},o=function(e){return s.setState({currentLocation:e})},window.AFRAME.components.markerhandler||window.AFRAME.registerComponent("markerhandler",{init:function(){this.el.sceneEl.addEventListener("markerFound",(function(e){var n=e.target.dataset.location;o(n),t.ref("locations").child(n).once("value",(function(e){var t=[],n=e.val();for(var a in n)t.push(Object(U.a)(Object(U.a)({},n[a]),{},{id:a}));i(t)}))})),this.el.sceneEl.addEventListener("markerLost",(function(e){return i([])}))}});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){delete window.AFRAME.components.markerhandler}},{key:"render",value:function(){var e=this.state,t=e.locationNames,n=e.currentLocation,r=e.currentImages,i=e.imageUrlsById,o=Object.keys(i).length>0,s=t.length>0;return Object(a.jsxs)("a-scene",{id:"a-scene","vr-mode-ui":"enabled: false;",renderer:"logarithmicDepthBuffer: true;",embedded:!0,arjs:"trackingMethod: best; sourceType: webcam;debugUIEnabled: false;",children:[o&&Object(a.jsxs)("a-assets",{children:[Object(a.jsx)("img",{id:"hiroMarker",src:W,alt:"hiroMarker"}),Object.keys(i).map((function(e){return Object(a.jsx)("img",{id:e,src:i[e],alt:e},e)}))]}),o&&s&&t.map((function(e){return Object(a.jsx)(F,{location:e,images:n===e&&r.length>0?r:[]},e)})),Object(a.jsx)("a-entity",{camera:!0})]})}}]),n}(u.a.Component)),G=(n(122),j.a.initializeApp({apiKey:"AIzaSyAA4zXM0wRBrL1l65NHg_8mQcjg75ew9RQ",authDomain:"campus-coloring.firebaseapp.com",databaseURL:"https://campus-coloring.firebaseio.com",projectId:"campus-coloring",storageBucket:"campus-coloring.appspot.com",messagingSenderId:"45926036058",appId:"1:45926036058:web:a9271137ac86762843de63",measurementId:"G-WPPW3TX4QG"})),Q=G.auth(),J=G.database(),X=G.storage(),_=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={imagesInfo:null,user:"loading"},e.setImagesInfo=function(t){return e.setState({imagesInfo:t})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;Q.onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(a.jsx)(z,{db:J,storage:X,setImagesInfo:this.setImagesInfo}),Object(a.jsx)(P,{imagesInfo:this.state.imagesInfo,auth:Q,user:this.state.user})]})}}]),n}(u.a.Component);l.a.render(Object(a.jsx)(_,{}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.3cd6b9a7.chunk.js.map