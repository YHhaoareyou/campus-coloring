(this["webpackJsonpcampus-coloring"]=this["webpackJsonpcampus-coloring"]||[]).push([[0],{67:function(e,t,n){},68:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c,i=n(1),a=n.n(i),r=n(21),s=n.n(r),o=(n(67),n(5)),j=n(6),b=(n(68),n(69),n(23)),l=n(33),d=n(53),u=n(54),O=n.p+"static/media/logo.6ce24c58.svg",h=n(25),g=n(15),x=Object(g.b)({key:"currentLocState",default:""}),f=Object(g.b)({key:"currentImgIdState",default:""}),m=Object(g.b)({key:"currentImgSrcState",default:""}),p=[{id:"garden",name:"Garden",range:{minLat:35,maxLat:36,minLong:139,maxLong:140}},{id:"60",name:"Bldg. 60",range:{minLat:35.7057,maxLat:35.706,minLong:139.7058,maxLong:139.7061}}],v=n(2),y=Object(h.a)(d.a)(c||(c=Object(b.a)(["\n  margin: 0px 10px;\n"])));var w,k=function(){var e=Object(g.e)(x),t=Object(i.useState)(null),n=Object(j.a)(t,2),c=n[0],a=n[1];return Object(i.useEffect)((function(){c||navigator.geolocation.getCurrentPosition((function(e){a(e.coords)}),(function(e){console.error("Error Code = "+e.code+" - "+e.message)}))}),[]),Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:"\u5834\u6240\u3092\u9078\u629e"}),Object(v.jsx)("div",{children:Object(v.jsx)(y,{xs:2,className:"g-4",children:c&&p.map((function(t){return Object(v.jsx)(u.a,{children:Object(v.jsxs)(l.a,{onClick:function(){return e(t.id)},children:[Object(v.jsx)(l.a.Img,{variant:"top",src:O,style:{height:"100px"}}),Object(v.jsxs)(l.a.Body,{children:[Object(v.jsx)(l.a.Title,{children:t.name}),Object(v.jsx)(l.a.Text,{children:(n=t.range,c&&n&&c.latitude>=n.minLat&&c.latitude<=n.maxLat&&c.longitude>=n.minLong&&c.longitude<=n.maxLong?"yes":"no")})]})]})},t.id);var n}))})})]})},C=h.a.div(w||(w=Object(b.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  text-align: center;\n  width: 100vw;\n  height: 50px;\n  background-color: rgba(248, 249, 250, 0.5);\n"])));var I,S,L=function(e){return e.location,Object(v.jsx)(C,{children:Object(v.jsx)("h2",{style:{textAlign:"center"},children:"60\u53f7\u9928"})})},N=n(31),P=h.a.div(I||(I=Object(b.a)(["\n  position: absolute;\n  top: 50vh;\n  left: 0;\n"]))),_=h.a.div(S||(S=Object(b.a)(["\n  position: absolute;\n  top: 50vh;\n  right: 0;\n"])));var B,T,z=function(e){var t=e.switchPrev,n=e.switchNext;return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(P,{children:Object(v.jsx)(N.a,{onClick:t,children:"\uff1c"})}),Object(v.jsx)(_,{children:Object(v.jsx)(N.a,{onClick:n,children:"\uff1e"})})]})},E=n(85),A=n(86),F=Object(h.a)(E.a)(B||(B=Object(b.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(248, 249, 250, 0.5);\n  padding: 10px;\n  padding-right: 20px;\n"]))),R=Object(h.a)(N.a)(T||(T=Object(b.a)(["\n  background: rgba(255, 255, 255, 0.5);\n  border: none;\n  width: 100%;\n"])));var W=function(e){var t=e.imgInfo,n=e.openCanvas,c=e.canvasVisibility,a=Object(i.useState)(!1),r=Object(j.a)(a,2),s=r[0],o=r[1];return!c&&Object(v.jsxs)(F,{children:[Object(v.jsxs)(d.a,{children:[Object(v.jsx)(u.a,{xs:8,children:Object(v.jsx)(l.a,{style:{height:"100px",overflowY:"scroll"},children:Object(v.jsxs)(l.a.Body,{style:{padding:"5px"},children:[Object(v.jsx)(l.a.Title,{as:"h6",style:{margin:"5px"},children:t.title}),Object(v.jsx)(l.a.Text,{style:{fontSize:"14px"},children:t.detail})]})})}),Object(v.jsxs)(u.a,{xs:4,children:[Object(v.jsxs)(d.a,{children:[Object(v.jsx)(u.a,{style:{padding:0},children:Object(v.jsxs)(R,{variant:"light",size:"sm",onClick:function(){},children:[Object(v.jsx)("i",{className:"bi bi-person"}),Object(v.jsx)("br",{}),"User"]})}),Object(v.jsx)(u.a,{style:{padding:0},children:Object(v.jsxs)(R,{variant:"light",size:"sm",onClick:function(){},children:[Object(v.jsx)("i",{className:"bi bi-heart"}),Object(v.jsx)("br",{}),"5"]})})]}),Object(v.jsxs)(d.a,{children:[Object(v.jsx)(u.a,{style:{padding:0},children:Object(v.jsxs)(R,{variant:"light",size:"sm",onClick:function(){},children:[Object(v.jsx)("i",{className:"bi bi-collection"}),Object(v.jsx)("br",{}),"\u524d\u4f5c\u3078"]})}),Object(v.jsx)(u.a,{style:{padding:0},children:Object(v.jsxs)(R,{variant:"light",size:"sm",onClick:function(){return o(!0)},children:[Object(v.jsx)("i",{className:"bi bi-pencil"}),Object(v.jsx)("br",{}),"\u63cf\u3053\u3046"]})})]})]})]}),Object(v.jsxs)(A.a,{centered:!0,show:s,onHide:function(){return o(!1)},children:[Object(v.jsx)(A.a.Header,{closeButton:!0,children:Object(v.jsx)(A.a.Title,{children:"\u3069\u3093\u306a\u7d75\u3092\u63cf\u304d\u305f\u3044\uff1f"})}),Object(v.jsxs)(A.a.Body,{style:{textAlign:"center"},children:[Object(v.jsx)(N.a,{variant:"outline-primary",onClick:function(){n({isNew:!0}),o(!1)},children:"\u65b0\u3057\u304f\u63cf\u3053\u3046"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(N.a,{variant:"outline-primary",onClick:function(){n({isNew:!1}),o(!1)},children:"\u3053\u308c\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u63cf\u3053\u3046"})]})]})]})},D=n(19),H=n(59),U=n(16),G=n(36);var Q=function(e){var t=e.closeCanvas,n=e.basePrevIds,c=e.isNew,a=Object(g.d)(x),r=Object(g.d)(f),s=(Object(g.d)(m),Object(i.useState)(function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}())),o=Object(j.a)(s,2),b=o[0],l=(o[1],Object(i.useState)(null)),d=Object(j.a)(l,2);d[0],d[1];Object(i.useEffect)((function(){if(!c){var e=new Image;e.src="/example.jpeg",console.log(e),e.crossOrigin="anonymous",e.onload=function(){document.getElementsByTagName("canvas")[1].getContext("2d").drawImage(e,0,0,b.width,b.height)}}}));return Object(v.jsx)(H.ReactPainter,{width:b.width,height:b.height-15,onSave:function(e){var i,s,o,j=Object(G.b)(),b=Object(U.b)();do{i=prompt("Please name your painting:")}while(!i);s=prompt("Please write something about this painting:"),(new Image).src=e,o=Date.now(),Object(G.d)(Object(G.c)(j,"paintings/"+i),e).then((function(e){return Object(G.a)(e.ref)})).then((function(e){Object(U.d)(Object(U.c)(b,"img_urls/"+a+"/"+o),e).then((function(e){Object(U.d)(Object(U.c)(b,"img_info/"+a+"/"+o),{title:i,detail:s,creator_id:"26577319",prev_img_ids:!c&&[r].concat(Object(D.a)(Object.keys(n)))}).then((function(e){Object(U.d)(Object(U.c)(b,"users/26577319/img_ids/"+a+"/"+o),!0).then((function(e){alert("Uploaded! Refresh the page to see your masterpiece!"),t()})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))})).catch((function(e){return alert(e)}))},render:function(e){var n=e.canvas,c=e.triggerSave,i=e.setColor,a=e.setLineWidth;return Object(v.jsxs)("div",{style:{position:"absolute",left:0,zIndex:"2000"},children:[Object(v.jsx)("h2",{style:{margin:"0px"}}),Object(v.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0)",border:"5px solid #666"},children:n}),Object(v.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,padding:"1rem",background:"#ccc",width:"100vw",height:100},children:[Object(v.jsxs)("div",{children:["Color"," ",Object(v.jsx)("input",{type:"color",onChange:function(e){return i(e.target.value)},style:{width:"30%"}})," ","Width"," ",Object(v.jsx)("input",{type:"number",placeholder:"5",min:"1",max:"20",onChange:function(e){return a(e.target.value)},style:{width:"30%"}})]}),Object(v.jsxs)("div",{style:{paddingTop:"1rem"},children:[Object(v.jsx)(N.a,{onClick:c,style:{padding:"0 10px"},children:"\u4fdd\u5b58"}),Object(v.jsx)(N.a,{onClick:t,style:{padding:"0 10px"},children:"\u3084\u3081\u308b"})]})]})]})}})};var J=function(){var e=Object(g.d)(x),t=Object(g.c)(f),n=Object(j.a)(t,2),c=(n[0],n[1]),a=Object(g.c)(m),r=Object(j.a)(a,2),s=(r[0],r[1]),b=Object(i.useState)(0),l=Object(j.a)(b,2),d=l[0],u=l[1],O=Object(i.useState)(!1),h=Object(j.a)(O,2),p=h[0],y=h[1],w=Object(i.useState)([]),C=Object(j.a)(w,2),I=C[0],S=C[1],N=Object(i.useState)(!0),P=Object(j.a)(N,2),_=P[0],B=P[1],T=function(t){var n=Object(U.b)();Object(U.a)(Object(U.c)(n,"img_urls/"+e+"/"+t)).then((function(e){e.exists()&&s(e.val())})).catch((function(e){return console.error(e)}))};return Object(i.useEffect)((function(){var t=Object(U.b)();Object(U.a)(Object(U.c)(t,"img_info/"+e)).then((function(e){e.exists()&&function(e){var t=Object.keys(e).map((function(t){return Object(o.a)({id:t},e[t])}));S(t),c(t[0].id),u(0),T(t[0].id)}(e.val())})).catch((function(e){return console.error(e)}))}),[e]),Object(v.jsxs)("div",{className:"App",children:[e?Object(v.jsxs)("div",{children:[Object(v.jsx)(L,{location:e}),Object(v.jsx)(z,{switchPrev:function(){if(I.length>1){var e=0===d?I.length-1:d-1;u(e),c(I[e].id),T(I[e].id)}},switchNext:function(){if(I.length>1){var e=d===I.length-1?0:d+1;u(e),c(I[e].id),T(I[e].id)}}}),Object(v.jsx)(W,{imgInfo:I[d],openCanvas:function(e){var t=e.isNew;y(!0),B(t)},canvasVisibility:p})]}):Object(v.jsx)(k,{}),p&&Object(v.jsx)(Q,{isNew:_,basePrevIds:I[d].prev_img_ids||[],closeCanvas:function(){return y(!1)}})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))},V=n(60);var X=function(){var e=Object(g.d)(x),t=Object(g.d)(m),n=Object(g.d)(f),c=Object(i.useState)({}),a=Object(j.a)(c,2),r=a[0],s=a[1];return Object(i.useEffect)((function(){var t=Object(U.b)();Object(U.a)(Object(U.c)(t,"img_urls/"+e)).then((function(e){e.exists()&&s(e.val())})).catch((function(e){return console.error(e)}))}),[e]),Object(v.jsxs)("a-scene",{id:"a-scene","vr-mode-ui":"enabled: false;",renderer:"logarithmicDepthBuffer: true;",arjs:"trackingMethod: best; sourceType: webcam;debugUIEnabled: false;",children:[Object(v.jsx)("a-assets",{children:r&&Object.keys(r).map((function(e){return Object(v.jsx)("img",{id:e,src:r[e],crossOrigin:"anonymous"})}))}),t&&Object(v.jsx)("a-image",{src:"#"+n,width:11,height:8,position:"0 1.5 -10",rotation:"0 0 0"})]})},K=(n(81),Object(V.a)({apiKey:"AIzaSyAA4zXM0wRBrL1l65NHg_8mQcjg75ew9RQ",authDomain:"campus-coloring.firebaseapp.com",databaseURL:"https://campus-coloring.firebaseio.com",projectId:"campus-coloring",storageBucket:"campus-coloring.appspot.com",messagingSenderId:"45926036058",appId:"1:45926036058:web:a9271137ac86762843de63",measurementId:"G-WPPW3TX4QG"}),function(){var e=Object(g.d)(x);return Object(v.jsxs)("div",{style:{width:"100%",height:"100%"},children:[e&&Object(v.jsx)(X,{}),Object(v.jsx)(J,{})]})});s.a.render(Object(v.jsx)(g.a,{children:Object(v.jsx)(K,{})}),document.getElementById("root")),M()}},[[82,1,2]]]);
//# sourceMappingURL=main.1ab8bcd2.chunk.js.map